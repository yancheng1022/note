

# **网格云接口方案**

## 一、营销2.0侧接口接口



#### 接口统一返回参数

| 参数 |   参数名称    | 参数类型 | 备注 |
| :--: | :-----------: | :------: | :--: |
| code | 成功/失败标志 |  String  |      |
| msg  | 成功/失败原因 |  String  |      |
| data |    数据体     |  Object  |      |



###  **1.查询用户列表**

优先级：高

通过联系方式、用户编号查询营销2.0用户档案，返回关联的所有用户信息列表，需剔除销户。

**服务端：营销2.0**

**接口地址：/getConsList**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|      参数      |    参数名称    | 参数类型 | 是否必传 |            备注            |
| :------------: | :------------: | :------: | :------: | :------------------------: |
|    pageNum     |    分页页码    |   int    |   true   |                            |
|    pageSize    |  分页每页数量  |   int    |   true   |                            |
| contractNumber |   查询手机号   |  String  |  1/true  | 查询手机号和查询户号二选一 |
|     consNo     |    查询户号    |  String  |  1/true  | 查询手机号和查询户号二选一 |
|                |     电表号     |  String  |  1/true  |                            |
|                | 电表号出厂编号 |  String  |  1/true  |                            |

##### 	**返回参数**

|      参数       |     备注     |     参数名称     | 参数类型  | 是否必传 |
| :-------------: | :----------: | :--------------: | :-------: | :------: |
|     consNo      |              |     用户编号     |  String   |    -     |
|    consName     |              |     用户名称     |  String   |    -     |
|    elecAddr     |              |     用电地址     |  String   |    -     |
|     eccStat     |              |     用户状态     |  String   |    -     |
|     voltLv      |              |     电压等级     |  String   |    -     |
|   voltLvName    |              |   电压等级名称   |  String   |    -     |
|    cityCode     |              |   所属城市编码   |  String   |    -     |
|    cityName     |              |     所属城市     |  String   |    -     |
| urbanRuralFlag  |              |   城乡类别编码   |  String   |    -     |
| urbanRuralName  |              |     城乡类别     |  String   |    -     |
| contractPerson  |              |      联系人      |  String   |    -     |
| contractNumber  |              |  联系人联系号码  |  String   |    -     |
| contractAddress |              |    联系人地址    |  String   |    -     |
| powerSupplyUnit |              |   供电单位编码   |  String   |    -     |
| powerSupplyName |              |     供电单位     |  String   |    -     |
|   exeAttrCode   |              |   用户扩展属性   |  String   |    -     |
|     ecCateg     |              |   用电类型编码   |  String   |          |
|   ecCategName   |              |   用电类型名称   |  String   |          |
|     indCls      |              |     行业分类     |  String   |          |
|   indClsName    |              |   行业分类名称   |  String   |          |
| **exeAttrTags** |              | **用户扩展属性** | **Array** |          |
|    tagValue     | 11煤改电标识 |     属性标识     |  String   |          |
|     tagName     |              |     属性名称     |  String   |          |







### 2.查询客户故障报修信息

优先级：高

通过户号查询客户故障报修信息。作为基础数据源提供[智能客服](#6.查询客户故障报修信息 )及[移动端]()接口使用字段内容详见

 **服务端：营销2.0**

**接口地址：/api/businessQuery/workOrder95598**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|  参数  | 参数名称 | 参数类型 | 是否必传 | 备注 |
| :----: | :------: | :------: | :------: | :--: |
| consNo | 用户编号 |  String  |   true   |      |

##### 	**返回参数**

|       参数       |   参数名称   | 参数类型 | 是否必传 |                       备注                        |
| :--------------: | :----------: | :------: | :------: | :-----------------------------------------------: |
|      appNo       |   申请编号   |  String  |          |                                                   |
|     cscAppNo     | 国网申请编号 |  String  |          |                                                   |
|     busType      |   业务类型   |  String  |          |                                                   |
|  busSubTypeName  | 业务类型名称 |  String  |          |                                                   |
|    busSubType    |  子业务类型  |  String  |          | 2位一级业务类型、4位二级业务类型、6位三级业务类型 |
|     acptTime     |   受理时间   |  String  |          |                YYYY-MM-DD HH:MI:SS                |
|  mgtOrgCodeName  | 工单单位名称 |  String  |          |                                                   |
|     acptCont     |   受理内容   |  String  |          |                                                   |
|      custNo      |   用户编号   |  String  |          |                                                   |
|     custName     |   用户名称   |  String  |          |                                                   |
|     contact      |    联系人    |  String  |          |                                                   |
|    contactTel    |   联系电话   |  String  |          |                                                   |
|   busCpltTime    |   办结时间   |  String  |          |                YYYY-MM-DD HH:MM:SS                |
|     curStep      | 当前处理环节 |  String  |          |                                                   |
| hndlOrgCodeName  |   处理单位   |  String  |          |                                                   |
|     hndlDept     |   处理部门   |  String  |          |                                                   |
| faultUrgnDegName |   紧急程度   |  String  |          |                                                   |
|  secSubTypeName  |   故障原因   |  String  |          |                                                   |
|    faultAddr     |   故障地址   |  String  |          |                                                   |
|    repairTime    | 故障修复时间 |  String  |          |                YYYY-MM-DD HH:MM:SS                |
| frstAidHandleRec | 现场抢险记录 |  String  |          |                                                   |
|                  |   工单状态   |  String  |          |                                                   |
|                  |              |          |          |                                                   |
|                  |              |          |          |                                                   |

 001(故障报修):faultRepairType 、 003(查询咨询):CSConsultCls、 005(投诉):CSCmpltCls、 006(举报):CSOpnCls、 007(表扬):CSPraiseCls、 008(建议):CSSugCls、 009(意见):CSOpnCls、 015(客户催办):无、 018(业务申请):CSSrvAppCls



### 3.查询电量电费信息（历月）

优先级：高

通过户号查询客户电量电费，非本月

 **服务端：营销2.0**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|  参数   | 参数名称 | 参数类型 | 是否必传 |                             备注                             |
| :-----: | :------: | :------: | :------: | :----------------------------------------------------------: |
| consNo  | 用户编号 |  String  |   true   |                                                              |
| rcvblYM | 电费年月 |  String  |   true   | YYYY-MM（非当前电费年月，查询当前年月需调用 查询当前余额接口） |

##### 	**返回参数**
|     参数     |  参数名称  | 参数类型 | 是否必传 | 备注 |
| :----------: | :--------: | :------: | :------: | :--: |
|    ecQty     |   总电量   |  double  |    -     |      |
|  rcvdSumAmt  |  实收合计  |  double  |    -     |      |
| rcvblArerAmt |  应收金额  |  double  |    -     |      |
|   rcvdAmt    |  实收金额  |  double  |    -     |      |
| rcvblLqdDamg | 实收违约金 |  double  |    -     |      |







### 4.查询当前余额

优先级：高

通过户号查询客户当前月测算电费、电量

 **服务端：营销2.0**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|  参数  | 参数名称 | 参数类型 | 是否必传 | 备注 |
| :----: | :------: | :------: | :------: | :--: |
| consNo | 用户编号 |  String  |   true   |      |

##### 	**返回参数**

|     参数     |   参数名称   | 参数类型 | 是否必传 | 备注 |
| :----------: | :----------: | :------: | :------: | :--: |
| calcAvailbal | 实时可用余额 |  double  |   true   |      |
|   calcQty    |   测算电量   |  double  |   true   |      |
|   calcAmt    |   测算电费   |  double  |   true   |      |
|  prepayBal   |   账户余额   |  double  |   true   |      |







### 5.查询业扩办电工单查询

优先级：高

通过用户编号查询用户在营销系统业务业扩办电业务

 **服务端：营销2.0**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|  参数  | 参数名称 | 参数类型 | 是否必传 | 备注 |
| :----: | :------: | :------: | :------: | :--: |
| consNo | 客户编号 |  String  |   true   |      |

##### 	**返回参数**

|       参数       |   参数名称   | 参数类型 | 是否必传 |        备注         |
| :--------------: | :----------: | :------: | :------: | :-----------------: |
|      appNo       |   申请编号   |  String  |          |                     |
|      consNo      |   客户编号   |  String  |          |                     |
|     consName     |   客户名称   |  String  |          |                     |
|      orgNo       |   供电单位   |  String  |          |                     |
|     orgName      | 供电单位名称 |  String  |          |                     |
|     elecAddr     |   用电地址   |  String  |          |                     |
|    contactTel    |   联系信息   |  String  |          |                     |
|   businessType   |   业务类型   |  String  |          |                     |
| businessTypeName | 业务类型名称 |  String  |          |                     |
|     acptStf      |   受理人员   |  String  |          |                     |
|    createTime    |   受理时间   |  String  |          | YYYY-MM-DD HH:MM:SS |
|     procName     |   流程名称   |  String  |          |                     |
|     stepName     |   环节名称   |  String  |          |                     |
|    orderStat     |   工单状态   |  String  |          |                     |
|    handleName    |   处理人员   |  String  |          |                     |
|     acmpTime     | 环节完成时间 |  String  |          | YYYY-MM-DD HH:MM:SS |
|     bigTime      | 环节开始时间 |  String  |          | YYYY-MM-DD HH:MM:SS |
|                  |              |          |          |                     |



1、查询业扩报装信息

```sql

```

2、查询业扩工单信息，（通过业扩报装-申请编号在进行查询对应工单流程情况）

```sql

```

```
wkOrderStat 工单状态 : 01 运行,02 挂起,03 作废,04 回退待处理,05 归档,06 在途,07 关闭,08 取消
stepStat 环节状态 : 01 未启动,02运行,03 完成,04 终止,05 挂起,06 待领取
```



### 6.查询用户停电信息

优先级：高

按停电开始时间±30天，最近的一条

 **服务端：营销2.0**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|   参数    | 参数名称 | 参数类型 | 是否必传 |        备注         |
| :-------: | :------: | :------: | :------: | :-----------------: |
|  consNo   | 用户编号 |  String  |   true   |                     |
| queryTime | 查询时间 |  String  |   true   | YYYY-MM-DD hh:mm:ss |

##### 	**返回参数**

|        参数        |     参数名称     | 参数类型 | 是否必传 |  备注   |
| :----------------: | :--------------: | :------: | :------: | :----------------------------------------------------------: |
|    suplStopType    |     停电类型     |  String  |   true   | 01：计划停电、02：故障停电 、07：临时检修、08：超电网供电能力停电、10：表箱（计）作业停电、99：其他停电 |
|  suplStopBegTime   |   停电开始时间   |  String  |   tru    |                     YYYY-MM-DD hh:mm:ss                      |
|  suplStopEndTime   |   停电结束时间   |  String  |    -     |                     YYYY-MM-DD hh:mm:ss                      |
|   suplStopReason   |     停电原因     |  String  |    -     |                                                              |
| custSuplStopState  | 当前用户停电状态 |  String  |    -     | 非用户实际停电状态，仅表示是否在计划停电内 ，停电中、未开始、已结束 |
|   cancelSuplStop   |   是否取消停电   |  String  |    -     |                            是、否                            |
| cancelSuplStopDesc |     取消原因     |  String  |    -     |                是否取消停电 为 "是" ，才存在                 |
|    suplRcvrType    |   现场送电类型   |  String  |    -     |                01：全部、02：部分、03：未送电                |
|      infoStat      |   停电信息状态   |  String  |    -     |               01： 无效、02：有效、03：冻结中                |
|      chgType       |     变更状态     |  String  |    -     |        00：新增、01：撤销、02：计划变更、03：现场变更        |
|      chgTime       |     变更时间     |  String  |    -     |                     YYYY-MM-DD hh:mm:ss                      |





```sql


```





### 7.查询台区信息

优先级：低（第二批交付）

通过台区编号或台区名称查询台区信息。使用场景：网格经理绑定是进行选择。

 **服务端：营销2.0**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|      参数      |   参数名称   |    参数类型    | 是否必传 |                             备注                             |
| :----------: | :----------: | :----------: |  :----------:  | :------------------------------------------: |
|   tgNo   | 台区编号 |  String  | 1/2 true |                台区编号与台区名称不能同时为空                |
|  tgName  | 台区名称 |  String  | 1/2 true | 台区支持模糊查询，模糊查询不得小于3个字符；台区编号与台区名称不能同时为空 |
|  orgNo   | 供电单位 |  String  |   true   |                           包含下级                           |
|  pageNo  | 分页页码 |   int    |   true   |                                                              |
| pageSize |  分页数  |   int    |   true   |                                                              |

##### 	**返回参数**

|  参数  | 参数名称 | 参数类型 | 是否必传 | 备注 |
| :----: | :------: | :------: | :------: | :--: |
|  tgNo  | 台区编号 |  String  |   true   |      |
| tgName | 台区名称 |  String  |   true   |      |
| orgNo  | 供电单位 |  String  |   true   |      |
|        |          |          |          |      |





## 二、呼叫平台侧接口

### 一、网格化服务端

#### 1.呼叫平台话单推送 - 待补充

优先级：高

推送话单数据给网格化平台进行同步

**交互轨迹：呼叫平台 → 网格化平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|        参数         |                                                                         参数名称                                                                          |  参数类型  | 是否必传  |                                  备注                                  |
| :---------------: | :---------------------------------------------------------------------------------------------------------------------------------------------------: | :----: | :---: | :------------------------------------------------------------------: |
|   streamnumber    |                                                                        序列号唯一标识                                                                        | String | true  |                     需保证唯一性，纯数字，以时间戳开头（到毫秒）+会话ID                      |
|      callId       |                                                                         呼叫标识                                                                          | String | true  |                                                                      |
|        sId        |                                                                  呼叫会话号（系统生成的会话唯一标识）                                                                   |        | true  |                           和streamnumber一样                            |
|        seq        |                                                                         记录序列号                                                                         |   -    | 确认删除  |                                 确认删除                                 |
|       VCCID       |                                                                         集团标识                                                                          |   -    | 确认删除  |                                 确认删除                                 |
|    DEPARTMENT     |                                                                        部门/班组号                                                                         |   -    | 确认删除  |                                 确认删除                                 |
|       TYPE        |                                                             话单类型   0：路由排队 1：IVR呼叫 2：坐席呼叫                                                              |  111   |  需梳理  |                               需要呼叫平台映射                               |
|     DIRECTION     |                                                                         呼叫方向                                                                          |  111   |  已确认  |                              1呼入 ，2 呼出                               |
|      SERVICE      | 服务类型   0 : 外部呼入 或分机终端外呼 1：精确式外呼 2：预览式外呼 3：坐席外呼（CALLOUTSIDE） 4：IVR外呼 5：内部呼叫（CALLINSIDE） 6：咨询 7：转入 8：桥接 9：监听 10：拦截 11：强插 12：渐进式外呼 13：经验预测式外呼 14：精确预览式外呼 |  111   |  需梳理  |                               0,3,4,7                                |
|     CALLTYPE      |                                                                    呼叫类型 0内部呼叫1外部呼叫                                                                    |        |  需梳理  |                                  需要                                  |
|    USERNUMBER     |                                                                         用户号码                                                                          |  111   |  已确认  |                                                                      |
|      USERID       |                                                                用户工号 当用户为坐席时，填写用户的坐席工号                                                                 |        | 确认删除  |                                                                      |
|     AREACODE      |                                                                         用户区号                                                                          |        |  已确认  |                                  需要                                  |
|     SERVICEID     |                                                                          服务号                                                                          |        |  需梳理  |                              大概率是技能组ID                               |
|      DETAIL       |                                                                        呼叫结果明细                                                                         |  111   |  需梳理  |                                  需要                                  |
|    AGENTNUMBER    |                                                                    坐席号码 呼叫中坐席分机号码                                                                     |        |  已确认  |                               坐席话单时存在                                |
|      AGENTID      |                                                                     坐席工号 呼叫中坐席工号                                                                      |        |  已确认  |                               坐席话单时存在                                |
|     AGENTNAME     |                                                                         坐席名称                                                                          |   11   |  已确认  |                               坐席话单时存在                                |
|     STARTTIME     |                                                                        会话开始时间                                                                         |   11   |  已确认  |                                  需要                                  |
|     RINGTIME      |                                                                         振铃时间                                                                          |   11   |  已确认  |                                  需要                                  |
|    ANSWERTIME     |                                                                        会话结束时间                                                                         |   11   |  已确认  |                                  需要                                  |
|    RINGSECONDS    |                                                                 振铃时长 单位：秒（应答时间-振铃时间）                                                                  |   11   |  已确认  |                                  需要                                  |
|   ANSWERSECONDS   |                                                                 应答时长 单位：秒（结束时间-应答时间）                                                                  |   11   |  已确认  |                                  需要                                  |
|   QUEUESECONDS    |                                                               排队时长 单位：秒，排队此坐席所经过的总排队时间                                                                |   11   |  已确认  |                                  需要                                  |
|     DURATION      |                                                                会话持续时长 单位：秒（结束时间-开始时间）                                                                 |   11   |  已确认  |                                  需要                                  |
|      ENDTIME      |                                                                         结束时间                                                                          |        |  已确认  |                                  需要                                  |
|    ANSWERFLAG     |                                                   应答标志   0：无效（默认） 1：接通 2：未接通 如果TYPE=6,1表示用户输入，2未输入"                                                   |   11   |  已确认  |                                0,1,2                                 |
|    CALLRESCODE    |                                      呼叫结束码  0：无效（默认） 1：用户挂机 2：用户未接通 3：坐席分机挂机 4：坐席分机未接通 5：坐席应用挂机 6：坐席转移 7：坐席被拦截"                                       |   11   |  需梳理  |                                  需要                                  |
|   CALLENDCAUSE    |                                                通话结束响应码 通话结束原因 0 正常挂机 1 代答释放 2 应用释放 3 异常释放 4 最大通话时长释放"                                                 |   11   |  需梳理  |                                  需要                                  |
|  TRANSFERNUMBER   |                                                                         转移号码                                                                          |   -    |  需梳理  |                                  删除                                  |
|   ROUTERESCODE    |                      路由排队结果  0：拒绝 1：转分机（只表示给主叫分配了该分机，不指示转接成功） 3：转服务 10：正常排队选路（该值只表示选中了坐席，并不表示最终这个呼叫能接通） 11：选路前用户放弃（一般是排队时用户放弃）"                       |   -    |  需梳理  |                               11,10,0                                |
|  ROUTESERVICEID   |                                                                    路由排队服务号 最后选中的服务                                                                    |        |  需梳理  |                                  删除                                  |
|     ROUTEDEST     |                                                                         路由目标                                                                          |        |  需梳理  |                                  删除                                  |
|    DESTAGENTID    |                                                                        路由目标坐席号                                                                        |        |  需梳理  |                                  删除                                  |
|    ROUTEREASON    |                                                          路由原因 0：正常排队 其他：ROUTE错误码 IVR话路转移类型"                                                           |   -    |  需梳理  |                                  删除                                  |
|   ROUTEENDCAUSE   |                                                             路由结束原因值 -1默认，0用户放弃，>0 具体的结束原因                                                             |   -    |  需梳理  |                                  需要                                  |
|  ORIGAGENTNUMBER  |                                                                         坐席号码                                                                          |        |  需梳理  |                          300w空，只有249条是同一个内容                          |
|    ORIGAGENTID    |                                                                         坐席工号                                                                          |        |  需梳理  |                               待定200w空                                |
|    ORIGCALLED     |                                                            原始被叫号码 整个会话最原始的被叫号码，通常用于路由的统计使用                                                            |        |  已确认  |                                  需要                                  |
|     SRFMSGID      |                                                                         录音文件                                                                          |        |  已确认  |                          待定是 id 还是 可直接访问的地址                          |
|     MSSERVER      |                                                               所在的媒体服务器名称 存放云视频MEETINGID                                                               |        | 确认删除  |                                删除ms1值                                |
|       MEDIA       |                                                                    媒体类型 0 音频，1 音视频                                                                    |   -    | 确认删除  |                                  删除                                  |
|    TRANSPARAM     |                                                                         透明参数                                                                          |        | 确认删除  |                               删除md5内容                                |
|     CALLDATA      |                                                                         随路数据                                                                          |        | 确认删除  |                                  删除                                  |
|    ENDCALLDATA    |                                                                       呼叫结束随路数据                                                                        |        | 确认删除  |                                  删除                                  |
|    SERVICENAME    |                                                                         服务名称                                                                          |        | 技能组名称 |                                  需要                                  |
|      VCCNAME      |                                                                         企业名称                                                                          |        | NX企业  |                                  删除                                  |
|  SESSIONSTOPTIME  |                                                                       整体会话结束时间                                                                        |        |  已确认  |                                  需要                                  |
|    FAILREASON     |                                                                        呼叫结束原因值                                                                        |   -    | 确认删除  |                                  删除                                  |
|     SMRESCODE     |                                                                        语音识别返回码                                                                        |   -    | 确认删除  |                                  删除                                  |
|      SMMSGID      |                                                                     语音识别返回的MSGID                                                                      |   -    | 确认删除  |                                  删除                                  |
|   CONTRACTORID    |                                                                    承包商ID IVR话路接通时长                                                                    |   -    | 确认删除  |                                  删除                                  |
|  CONTRACTORNAME   |                                                                         承包商名称                                                                         |   -    | 确认删除  |                                  删除                                  |
|  SUBCONTRACTORID  |                                                                        子承包商ID                                                                         |   -    | 确认删除  |                                  删除                                  |
| SUBCONTRACTORNAME |                                                                        子承包商名称                                                                         |   -    | 确认删除  |                                  删除                                  |
|     PROJECTID     |                                                                         项目ID                                                                          |   -    | 确认删除  |                                  删除                                  |
|    PROJECTNAME    |                                                                          项目名                                                                          |   -    | 确认删除  |                                  删除                                  |
|    PROJECTTYPE    |                                                                         项目类型                                                                          |   -    | 确认删除  |                                  删除                                  |
|       ORGNO       |                                                                         供电单位                                                                          |        |  已明确  |                                  需要                                  |
|      ORGName      |                                                                         供电单位                                                                          |        |  已明确  |                                  需要                                  |
|      dataSrc      |                                                                         数据来源                                                                          |        | true  |                               数据来源 0合众                               |
|        ym         |                                                                          年月                                                                           | String | true  |                                yyyymm                                |
|  currentCallType  |                                                            当前通话分类 01 智能客服， 02 人工坐席，03 网格经理                                                            |        |       |                                                                      |
|    callContent    |                                                                      当前通话通话内容文字                                                                       |        |       |                                                                      |
|     callTrack     |                                                                         通话轨迹                                                                          |        |       | 01 智能客服 ，02人工坐席 ，03 网格经理， 04智能客服+人工 ， 05 智能客服+网格经理，06 智能客服+ 网格经理 +人工 |
|                   |                                                                                                                                                       |        |       |                                                                      |
|                   |                                                                                                                                                       |        |       |                                                                      |

##### 	**返回参数**

| 参数 | 参数名称 | 参数类型 | 是否必传 |  备注   |
| :--: | :------: | :------: | :------: | :-----: |
| code | 成功标志 |  String  |   true   | 200成功 |
| msg  | 结果原因 |  String  |   true   |         |





#### 2.呼叫平台坐席事件（坐席考勤）推送 - 待补充

优先级：高

推送坐席事件(坐席考勤)数据给网格化平台进行同步

**交互轨迹：呼叫平台 → 网格化平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|     参数      |                  参数名称                   | 参数类型 | 是否必传 |                             备注                             |
| :-----------: | :-----------------------------------------: | :------: | :------: | :----------------------------------------------------------: |
|  steamNumber  |                主键唯一标识                 |  String  |   true   |                      落库是网格自己报装                      |
|               |                    年月                     |          |          |                                                              |
|     ssid      |               当前session标识               |  String  |   true   |     当前session标识 在座席一次登录周期内，该sessionid不      |
|    agentId    |                  坐席工号                   |  String  |   true   |                                                              |
|   agentName   |                  坐席名称                   |  String  |   true   |                                                              |
|    callId     |                  呼叫标识                   |  String  |          |                                                              |
|     event     |                  状态代码                   |  String  |   true   |                        0:签出 ,1:签入                        |
|     esate     |                  当前状态                   |  String  |   true   |               1,302,3,13,16,0,15,307,-13,9,2,4               |
|  estateName   |                当前状态名称                 |  String  |   true   |                                                              |
|     etime     |                状态触发时间                 |  String  |   true   |                        YYYYMMDDHHMMSS                        |
|   lastState   |                  上个状态                   |  String  |    -     |               1,302,3,13,16,0,15,307,-13,9,2,4               |
|   lastTime    |              上个状态触发时间               |  String  |    -     |                        YYYYMMDDHHMMSS                        |
| lastDuration  | 上个状态持续时间 单位秒 在心跳消息中保持为0 |  String  |    -     |                                                              |
| inOutDuration |                签入签出时长                 |  String  |    -     | 只在event=0或1时有效，event=0时，代表签入时长。Event=1时，代表签出时长。 |
|      ip       |                   IP地址                    |  String  |   true   |                                                              |
|      mac      |                   MAC地址                   |  String  |   true   |                                                              |
|     port      |                   端口号                    |  String  |   true   |                             删除                             |

##### 	**返回参数**

| 参数 | 参数名称 | 参数类型 | 是否必传 |  备注   |
| :--: | :------: | :------: | :------: | :-----: |
| code | 成功标志 |  String  |   true   | 200成功 |
| msg  | 结果原因 |  String  |   true   |         |





#### 3.智能客服会话总结推送 - 待补充---合众-推送

优先级：中

智能客服通话转人工时，主动调用人工智能平台的大模型进行智能会话总结，总结成功后推送至网格化平台。 

**交互轨迹： 呼叫平台→网格化平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|  参数   |    参数名称    | 参数类型 | 是否必传 |    备注    |
| :-----: | :------------: | :------: | :------: | :--------: |
| callId  |  通话唯一标识  |  String  |   true   |            |
|  ctiId  |  话单唯一标识  |  String  |   true   | 话单的UUID |
| content | 智能体总结内容 |  String  |   true   | 字符串json |

##### 	**返回参数**

| 参数 | 参数名称 | 参数类型 | 是否必传 |  备注   |
| :--: | :------: | :------: | :------: | :-----: |
| code | 成功标志 |  String  |   true   | 200成功 |
| msg  | 返回描述 |  String  |          |         |





#### 4.坐席信息变更推送（增删改）

优先级：高

呼叫平台进行坐席信息变更后，推送至网格化平台同步变更相关信息。支持增删改

**交互轨迹： 呼叫平台→网格化平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|      参数       |    参数名称    | 参数类型  | 是否必传 |                             备注                             |
| :-------------: | :------------: | :-------: | :------: | :----------------------------------------------------------: |
|   changeType    |    变更类型    |  String   |   true   | 01新增、03、修改、02删除，如果为新增呼叫平台需要默认设置根节点部门信息与最小角色权限 |
|     agentId     |    坐席工号    |  String   |   true   |                                                              |
|    agentName    |    坐席姓名    |  String   |   true   |                                                              |
|    agentDept    |    坐席部门    |  String   |   true   |                                                              |
|     orgName     |    供电单位    |  String   |   true   |                                                              |
|      orgNo      |  供电单位编码  |  String   |   true   |                                                              |
| telephoneNumber |     分机号     |  String   |    -     |                                                              |
|  **skgroups**   | **所属技能组** | **array** |   true   |                                                              |
|    skgroupNo    |   技能组编号   |  String   |   true   |                                                              |
|   skgroupName   |   技能组名称   |  String   |   true   |                                                              |

##### 	**返回参数**

| 参数 | 参数名称 | 参数类型 | 是否必传 |  备注   |
| :--: | :------: | :------: | :------: | :-----: |
| code | 成功标志 |  String  |   true   | 200成功 |
| msg  | 结果原因 |  String  |   true   |         |





#### 5.网格接入号信息变更推送（增删改）

优先级：高

呼叫平台进行接入号码信息变更后，推送至网格化平台同步变更相关信息。支持增删改

**交互轨迹：呼叫平台→网格化平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|     参数     |  参数名称  |  参数类型  | 是否必传 |                       备注                        |
| :--------: | :----: | :----: | :--: | :---------------------------------------------: |
| changeType |  变更类型  | String | true | 01 新增、02 删除、03 修改，如果为新增呼叫平台需要默认设置根节点部门信息与最小角色权限 |
|   entId    |  企业编号  | String | true |                                                 |
| accessNum  |  接入号码  | String | true |                    唯一，不允许修改                     |
|   orgNo    |  单位编码  | String | true |                     自身供电单位                      |
|  orgName   |  单位名称  | String | true |                                                 |
|   cityNo   | 所属城市编码 | String | true |                     市级供电单位                      |
|  cityName  |  所属城市  | String | true |                                                 |
|   remark   |   描述   | String | true |                                                 |
|   girdNo   |  网格编码  | String | true |                 唯一值，一个供电所会有多个网格                 |
|  skgroups  |  技能组   | String |  -   |                                                 |



##### 	**返回参数**

| 参数 | 参数名称 | 参数类型 | 是否必传 |  备注   |
| :--: | :------: | :------: | :------: | :-----: |
| code | 成功标志 |  String  |   true   | 200成功 |
| msg  | 结果原因 |  String  |   true   |         |



#### 6.网格经理信息变更推送（增删改） - 待补充---1111

优先级：低 （第二批交付）

呼叫平台进行网格经理信息变更后，推送至网格化平台同步变更相关信息。支持增删改

**交互轨迹：呼叫平台→网格化平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|      参数       |   参数名称   |  参数类型  | 是否必传 |         备注         |
| :-----------: | :------: | :----: | :--: | :----------------: |
|  changeType   |   变更状态   | String | true |   01新增、02删除、03修改   |
|     entId     |   企业编号   | String | true |                    |
| gridUserName  |  网格经理名称  | String | true |                    |
| gridUserPhone | 网格经理手机号码 | String | true |         唯一         |
|    cityNo     |   所属地市   | String | true |       市级供电单位       |
|   cityName    |  所属地市编码  | String | true |                    |
|    orgName    |   单位名称   | String | true |       自身供电单位       |
|     orgNo     |   单位编码   | String | true |                    |
|   accessNum   |   接入号码   | String | true |                    |
|    remark     |    描述    | String | true |                    |
| subChangeType |  子变更状态   | String | true | 默认为0.如修改接入号挂接关系则为1 |

##### 	**返回参数**

| 参数 | 参数名称 | 参数类型 | 是否必传 |  备注   |
| :--: | :------: | :------: | :------: | :-----: |
| code | 成功标志 |  String  |   true   | 200成功 |
| msg  | 返回描述 |  String  |          |         |



#### 7.查询客户故障报修信息--取值规则需要与业务中心确认

优先级：高

智能客服通过用户编号查询客户故障报修信息。网格化侧需先调用[营销2.0 客服故障报修接口](#2.查询客户故障报修信息)后，在进行网格化侧故障报修信息查询，组合后返回至智能客服进行研判分析。

**交互轨迹： 呼叫平台→网格化平台→营销2.0**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|   参数    | 参数名称 | 参数类型 | 是否必传 |        备注         |
| :-------: | :------: | :------: | :------: | :-----------------: |
|  consNo   | 用户编号 |  String  |   true   |                     |
| startTime | 开始时间 |   Dete   |    -     | YYYY-MM-DD HH:MI:SS |
|  endTime  | 结束时间 |   Dete   |    -     | YYYY-MM-DD HH:MI:SS |

##### 	**返回参数**

|     参数     |                           参数名称                           | 参数类型  | 是否必传 | 备注 |
| :----------: | :----------------------------------------------------------: | :-------: | :------: | :--: |
| **gridList** |                       **网格化侧列表**                       | **Array** | **true** |      |
|              | 字段内容详见[营销2.0 客服故障报修接口](#2.查询客户故障报修信息) |           |          |      |
|  **csList**  |                        **国客侧列表**                        | **Array** | **true** |      |
|              | 字段内容详见[营销2.0 客服故障报修接口](#2.查询客户故障报修信息) |           |          |      |



#### 8.根据手机号码查询最近一次业务进展情况

优先级：中

智能客服通过手机号主动查询用户在范围时间内的最新一次的工单信息。

**交互轨迹： 呼叫平台→网格化平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|      参数      |  参数名称  | 参数类型 | 是否必传 |             备注              |
| :------------: | :--------: | :------: | :------: | :---------------------------: |
| contractNumber | 用户手机号 |  String  |   true   |                               |
|   startTime    |  开始时间  |   Date   |   true   |      YYYY-MM-DD HH:MI:SS      |
|    endTime     |  结束时间  |   Date   |   true   | YYYY-MM-DD HH:MI:SS  48小时内 |

##### 	**返回参数**

|     参数      |             参数名称             |  参数类型  |                           备注                            | 是否必传 |
| :-----------: | :------------------------------: | :--------: | :-------------------------------------------------------: | :------: |
|     count     |        查询条件内总工单数        |    int     |                                                           |   true   |
| **lastData**  |       **最近一次工单数据**       | **Object** |                                                           | **true** |
|     appNo     |             申请编号             |   String   |                         工单编号                          |          |
|    woType     |             业务类型             |   String   |                                                           |   true   |
|  woTypeName   |           业务类型名称           |   String   |                                                           |          |
|  accContent   |             受理内容             |   String   |                                                           |   true   |
| isOneTimeDone |          是否一次性办结          |   String   |               01 一次办结，02 非一次性办结                |          |
|  stepStatus   |           工单环节标志           |   String   | 01接单分理 ，02 业务处理 ，03工单审核，04工单回访，05归档 |   true   |
| HandleContent |             处理内容             |   String   |                                                           |          |
|  isArchived   |            是否已归档            |   String   |                 01 已归档 ， 02 在途工单                  |          |
| **orderList** |           **工单列表**           | **Array**  |           **倒序返回前10条，lastData包含其中**            | **true** |
|               | **参照lastData最近一次工单数据** |            |                                                           |          |



### 二、网格化调用端

#### 1.录音下载接口

优先级：高

通过录音标识返回录音文件，呼叫平台通过录音标识需从非结构化平提取后解密后返回给网格化平台，网格化平台获取时解密。

**交互轨迹： 网格化平台→呼叫平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|   参数    |   参数名称   | 参数类型 | 是否必传 |                            备注                            |
| :-------: | :----------: | :------: | :------: | :--------------------------------------------------------: |
| startTime | 录音开始时间 |  String  |    -     |                  年月（需要合众提供格式）                  |
| recordId  | 录音唯一标识 |  String  |   true   | 指一通电话下存在多条录音，录音的唯一标识，非通话的唯一标识 |

##### 	**响应头**

| 参数 |   参数名称   | 参数类型 | 是否必传 |    备注     |
| :--: | :----------: | :------: | :------: | :---------: |
| code | 成功失败标识 |  String  |   true   | 200表示成功 |
| msg  |   返回内容   |  String  |    -     |             |

**响应体**

| 参数 | 参数名称 | 参数类型 | 是否必传 |                       备注                       |
| :--: | :------: | :------: | :------: | :----------------------------------------------: |
|  -   |  文件流  |   blob   |   true   | 下载过程中进行解密，无需对录音地址进行鉴权或加密 |



#### 2.录音转文字（重新转写）

优先级：中

通过录音标识及上传单个录音文件进行录音转文字。

**交互轨迹： 网格化平台→呼叫平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|   参数   |   参数名称   |  参数类型  | 是否必传 |                      备注                      |
| :------: | :----------: | :--------: | :------: | :--------------------------------------------: |
| recordId | 录音唯一标识 |   String   |  1/true  |  加密文件，录音唯一标识与录音文件不能同时为空  |
|   file   |   录音文件   | File文件流 |  1/true  | 非加密文件，录音唯一标识与录音文件不能同时为空 |

##### 	**返回参数**

|  参数   |     参数名称     | 参数类型 | 是否必传 |    备注     |
| :-----: | :--------------: | :------: | :------: | :---------: |
|  code   |   成功失败标识   |  String  |   true   | 200表示成功 |
|   msg   |     返回内容     |  String  |    -     |             |
| content | 转换后的文字信息 |  String  |   true   |             |





#### 3.获取所有坐席列表

优先级：高

网格化平台主动获取全部坐席列表信息

**交互轨迹： 网格化平台→呼叫平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|    参数    |   参数名称    | 参数类型 | 是否必传 |                             备注                             |
| :--------: | :-----------: | :------: | :------: | :----------------------------------------------------------: |
|   entId    |   企业编号    |  String  |   true   |                         呼叫平台提供                         |
|  agentIds  |    坐席号     |  String  |   true   | 多个坐席标识以逗号分隔，最多允许100个,每个agentId需要''单引号扩上 |
|   state    | 查询坐席 类型 |  String  |    -     | 0当前签入坐席，1所有坐席（不分页查当日签 入坐席），2分页查所有坐席（签入和签出） 3 分页查当日签入坐席 |
| agentState |   坐席状态    |  String  |    -     |    0：未登录; 1：未就绪;  2：空闲;  3：通话中;  4：后处理    |
|   pageNo   |  查询开始 项  |   int    |    -     |                                                              |
|  pageSize  | 查询最大 条目 |   int    |    -     |                                                              |

##### 	**返回参数**

|        参数        |     参数名称      |  参数类型  | 是否必传 |                          备注                           |
| :----------------: | :---------------: | :--------: | :------: | :-----------------------------------------------------: |
|        code        |       结果        |   String   |   true   |                         200成功                         |
|        msg         |     结果描述      |   String   |   true   |                      返回信息说明                       |
|      **data**      |   **返回结果**    | **Object** | **true** |                                                         |
|      ctiTime       |    cti当前时间    |   String   |   true   |                                                         |
|     agentCount     |      坐席数       |   String   |   true   |                                                         |
|     agentBusy      |    忙碌坐席数     |   String   |   true   |                                                         |
|     agentIdle      |    空闲坐席数     |   String   |   true   |                                                         |
|     agentTalk      |    通话坐席数     |   String   |   true   |                                                         |
|      agentAcw      |  事后处理坐席数   |   String   |   true   |                                                         |
|    agentSignout    |    签出坐席数     |   String   |   true   |                                                         |
|  **contextArray**  | **返回实体数组**  | **Array**  | **true** |                                                         |
|      agentId       |     坐席工号      |   String   |   true   |                                                         |
|     agentName      |     坐席姓名      |   String   |   true   |                                                         |
|     agentState     |     坐席状态      |   String   |   true   | 0：未登录;  1：未就绪;  2：空闲;  3：通话中;  4：后处理 |
|   agentStateTime   | 座席状态改变时间  |   String   |    -     |                                                         |
| agentSignInOutTime | 座席签入/签出时间 |   String   |    -     |                                                         |
|     department     |       部门        |   String   |    -     |                                                         |
|      orgName       |     供电单位      |   String   |   true   |                          新增                           |
|       orgNo        |   供电单位编码    |   String   |   true   |                          新增                           |
|   sumAnswerCount   |   当日应答次数    |   String   |   true   |                                                         |
|    sumAnswerSec    |   当日应答时长    |   String   |   true   |                                                         |
|    curSignInSec    |   当前签入时长    |   String   |   true   |                                                         |
|  todayCurStateSec  | 当日当前状态时长  |   String   |   true   | 0：未登录;  1：未就绪;  2：空闲;  3：通话中;  4：后处理 |
|   todaySignInSec   |   当日签入时长    |   String   |   true   |                                                         |
|  todaySignInCount  |   当日签入次数    |   String   |   true   |                                                         |
| todaySignOutCount  |   当日签出次数    |   String   |   true   |                                                         |
|  todaySignOutSec   |   当日签出时长    |   String   |   true   |                                                         |
|   todayBusyCount   |   当日示忙次数    |   String   |   true   |                                                         |
|  todayDelayCount   |   当日整理次数    |   String   |   true   |                                                         |
|   todayDelaySec    |   当日整理时长    |   String   |   true   |                                                         |
|    callOutCount    |      外呼量       |   String   |   true   |                                                         |
|     callOutSec     |    外呼总时长     |   String   |   true   |                                                         |
|   todayIdleCount   |   当日空闲时长    |   String   |   true   |                                                         |
|   answerCount20    |     20s接通量     |   String   |   true   |                                                         |
|   serviceIdList    | 坐席所属技能组id  |   String   |   true   |                  serviceld1,serviceld2                  |
|   serviceameList   | 坐席所属技能名称  |   String   |   true   |                  serviceld1,serviceld2                  |





#### 4.查询分机列表

优先级：高

网格化平台查询分机列表信息，支持通过某个分机号单独查询。

**交互轨迹： 网格化平台→呼叫平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|      参数       | 参数名称 | 参数类型 | 是否必传 |      备注      |
| :-------------: | :------: | :------: | :------: | :------------: |
| telephoneNumber | 分机号码 |  String  |    -     |                |
|  telephoneType  | 分机类型 |  String  |    -     | 01内置、02外置 |
|     pageNo      |   页码   |   int    |   true   |                |
|    pageSize     |   页数   |   int    |   true   |                |

##### 	**返回参数**

|       参数        |  参数名称  |  参数类型  | 是否必传 |       备注       |
| :-------------: | :----: | :----: | :--: | :------------: |
|      code       | 成功失败标识 | String | true |     200成功      |
|       msg       |  结果描述  | String |      |                |
|      list       |  分机列表  | Array  | true |                |
| telephoneNumber |  分机号码  | String | true |                |
|  telephoneType  |  分机类型  | String | true |                |
|     agentId     |  对应坐席  | String |  -   | 非绑定坐席，当前分机号使用者 |
|    agentName    | 对应坐席名称 | String |  -   |                |





#### 5.坐席信息变更推送 -存在待定内容

优先级：中低

网格化平台进行坐席信息变更后，推送至呼叫平台同步变更相关信息。支持增删改

**交互轨迹： 网格化平台→呼叫平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

##### 	**请求参数**

|      参数       | 参数名称 | 参数类型 | 是否必传 |                             备注                             |
| :-------------: | :------: | :------: | :------: | :----------------------------------------------------------: |
|   changeType    | 变更类型 |  String  |   true   | 01新增、02删除 、03 修改、如果为新增呼叫平台需要默认设置根节点部门信息与最小角色权限 |
|     agentId     | 坐席工号 |  String  |   true   |           根据工号修改坐席名称，坐席工号不允许修改           |
|    agentName    | 坐席姓名 |  String  |    -     |                                                              |
| telephoneNumber | 坐席分机 |  String  |    -     |                 普华待定 ， 双方看平台后再定                 |

##### 	**返回参数**

| 参数 |   参数名称   | 参数类型 | 是否必传 |   备注   |
| :--: | :----------: | :------: | :------: | :------: |
| code | 成功失败标识 |   int    |   true   | 200 成功 |
| msg  |   返回结果   |  String  |   true   |          |



#### 6.查询通话排队列表

优先级：中低

网格化平台主动调用呼叫平台查询当前排队通话列表

**交互轨迹： 网格化平台→呼叫平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

##### 	**请求参数**

|   参数    | 参数名称 | 参数类型 | 是否必传 | 备注 |
| :-------: | :------: | :------: | :------: | :--: |
| serviceId | 技能组Id |  String  |    -     |      |
|  pageNo   | 当前页码 |   int    |          |      |
| pageSize  |  页条数  |   int    |          |      |

##### 	**返回参数**

|     参数      |   参数名称   | 参数类型  | 是否必传 |   备注   |
| :-----------: | :----------: | :-------: | :------: | :------: |
|     code      | 成功失败标识 |    int    |   true   | 200 成功 |
|      msg      |   返回结果   |  String   |   true   |          |
|     count     |     总数     |    int    |   true   |          |
| **queueList** | **排队列表** | **Array** | **true** |          |
|   callerNum   |   主叫号码   |  String   |   true   |          |
|   calleeNum   |   被叫号码   |  String   |   true   |          |
|  serviceName  |  技能组名称  |  String   |   true   |          |
|   queueDur    |   排队时长   |  String   |   true   |  单位秒  |
|     orgNo     | 供电单位编码 |  String   |   true   |          |
|    orgName    | 供电单位名称 |  String   |   true   |          |





#### 7.查询技能组列表

优先级：中低

网格化平台主动调用呼叫平台查询技能组列表

**交互轨迹： 网格化平台→呼叫平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

##### 	**请求参数**

|   参数    | 参数名称 | 参数类型 | 是否必传 | 备注 |
| :-------: | :------: | :------: | :------: | :--: |
| serviceId | 技能组Id |  String  |    -     |      |

##### 	**返回参数**

|    参数     |    参数名称    | 参数类型  | 是否必传 |   备注   |
| :---------: | :------------: | :-------: | :------: | :------: |
|    code     |  成功失败标识  |    int    |   true   | 200 成功 |
|     msg     |    返回结果    |  String   |   true   |          |
|  **list**   | **技能组列表** | **Array** | **true** |          |
|  serviceId  |    技能组Id    |  String   |   true   |          |
| serviceName |   技能组名称   |  String   |   true   |          |





#### 8.推送外呼保底号码

优先级：中低

网格化平台当**市级**新增、修改变动时推送给呼叫平台

**交互轨迹： 网格化平台→呼叫平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### **请求参数**

##### **请求参数**

|      参数      | 参数名称 | 参数类型 | 是否必传 | 备注 |
| :------------: | :------: | :------: | :------: | :--: |
|   serviceId    | 技能组Id |  String  |    -     |      |
| outboundNumber | 外显号码 |  String  |   true   |      |
|     orgNo      | 供电单位 |  String  |   true   |      |

##### **返回参数**

| 参数 |   参数名称   | 参数类型 | 是否必传 |   备注   |
| :--: | :----------: | :------: | :------: | :------: |
| code | 成功失败标识 |   int    |   true   | 200 成功 |
| msg  |   返回结果   |  String  |   true   |          |







### 三、智能外呼接口相关（优先级：中低）



#### 获取认证类

#####  1.POST   获取AccessToken

POST    /paas4x/accreditation

获取AccessToken

Body 请求参数

```apl
{
 "clientId": "{{clientId}}",
 "clientScr": "{{clientScr}}"
}
```

***\*请求参数\****

| 名称      | 位置 | 类型   | 必选 | 中文名       | 说明           |
| --------- | ---- | ------ | ---- | ------------ | -------------- |
| clientId  | body | string | 是   | 认证clientID | paas开户后生成 |
| clientScr | body | string | 是   | clientScr    | paas开户后生成 |

返回示例

200 Response

```json
{
 "status": "0",
 "message": "38150696226347251616833171415383",
 "expireTime": 18000
}
```

***\*返回结果\****

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | none | Inline   |

***\*返回数据结构\****

状态码 **200**

| 名称       | 类型    | 必选  | 约束 | 中文名              | 说明                   |
| ---------- | ------- | ----- | ---- | ------------------- | ---------------------- |
| status     | string  | true  | none | 响应状态码          | 0-操作成功；1-操作失败 |
| message    | string  | true  | none | AccessToken的值     | none                   |
| expireTime | integer | false | none | AccessToken有效时长 | 单位秒                 |





##### 2.GET 获取clientId和clientSrc

GET /genSecretKey

根据企业ID获取clientId和clientSrc（内部使用）获取hypaas.oauth2_client数据表的数据

***\*请求参数\****

| 名称    | 位置  | 类型   | 必选 | 中文名 | 说明   |
| ------- | ----- | ------ | ---- | ------ | ------ |
| entName | query | string | 否   |        | 企业ID |

返回示例

200 Response

```java
{
 "status": "0",
 "message": "操作成功",
 "data": {
  "id": 8,
  "clientName": "UEIP",
  "clientId": "b0b673e8-6925-4df7-9e0f-0c1b2ac12c41",
  "clientSecret": "5361c205-cc95-454c-b9ac-774c97006de6"
 }
}
```

***\*返回结果\****

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | none | Inline   |

***\*返回数据结构\****

状态码 **200**

| 名称         | 类型    | 必选 | 约束 | 中文名     | 说明 |
| ------------ | ------- | ---- | ---- | ---------- | ---- |
| status       | string  | true | none | 响应状态码 | none |
| message      | string  | true | none | 状态说明   | none |
| Objectdata   | object  | true | none |            | none |
| id           | integer | true | none | id         | none |
| clientName   | string  | true | none | 企业编号   | none |
| clientId     | string  | true | none | clientId   | none |
| clientSecret | string  | true | none | 密钥       | none |

#### 呼叫/任务管理类

##### 1.POST 新增任务 ***

POST /insertJob

```json
新增外呼任务

Body 请求参数

{
 "accessToken": "{{token}}",
 "jobName": "任务名称20240731",
 "description": "任务描述",
 "jobType": "1",
 "skgroups": [
  "测试技能组1",
  "测试技能组2"
 ],
 "outboundNumber": "02133195795",
 "alertTimelen": "35",
 "repeatConfs": [
  {
   "frequence": "1",
   "status": "3",
   "interval": "10"
  },
  {
   "frequence": "1",
   "status": "4",
   "interval": "10"
  }
 ],
 "chgroupName": "龙龙通道测试三四",
 "scheduleName": "测试配置日程09",
 "blacklistName": [
  "黑名单1",
  "黑名单2"
 ],
 "continuousSeconds": "100",
 "continuousFailed": "100",
 "ringingReco": "1",
 "speed": "1"
}
```

***\*请求参数\****

| 名称                     | 位置                 | 类型       | 必选   | 中文名         | 说明                                                         |
| ------------------------ | -------------------- | ---------- | ------ | -------------- | ------------------------------------------------------------ |
| body                     | body                 | object     | 否     |                | none                                                         |
| accessToken              | body                 | string     | 是     | AccessToken    | none                                                         |
| jobName                  | body                 | string     | 是     | 任务名称       | 不能包含特殊字符("[~!?@#$￥%&*！？……<>{}+=—·`^,，。:;：；‘]  |
| description              | body                 | string     | 否     | 任务描述       | none                                                         |
| jobType                  | body                 | string     | 是     | 任务类型       | **1自动语音**  2预测式  3外呼通知式                          |
| ~~outboundNumber~~           | ~~body~~                 | ~~string~~     | ~~是~~     | ~~外显号~~         | ~~机器人号码，接入号~~     12月01：删除                          |
| alertTimelen             | body                 | string     | 是     | 振铃时长       | none                                                         |
| repeatConfs              | body                 | [object]   | 否     | 重呼配置       | none                                                         |
| frequence                | body                 | string     | 是     | 重呼次数       | 1~5次                                                        |
| status                   | body                 | string     | 是     | 重呼状态       | 1 无效号码 2 无人接听 3 振铃放弃 4 线路故障 5 加拨零         |
| interval                 | body                 | string     | 是     | 重呼间隔       | 单位分钟                                                     |
| chgroupName              | body                 | string     | 是     | 通道组名称     | none                                                         |
| scheduleName             | body                 | string     | 是     | 日程名称       | none                                                         |
| blacklistName            | body                 | [string]   | 否     | 黑名单列表     | [“黑名单1”,”黑名单2”]                                        |
| ~~skgroups~~              | ~~body~~             | ~~[string]~~ | ~~否~~  | ~~技能组列表~~  | ~~如果任务类型为 “预测式” 时,技能组必须填写,填写技能组名称[“技能组2”,”技能组1”]~~   12月01：删除 |
| continuousSeconds        | body                 | string     | 否     | 连续秒挂量     | (0-1000) 如果不填默认20                                      |
| continuousFailed         | body                 | string     | 否     | 连续失败量     | (0-1000) 如果不填默认50                                      |
| ringingReco              | body                 | string     | 否     | 是否开启振铃音 | 默认不开启(1: 不开启, 2:开启)                                |
| speed                    | body                 | string     | 否     | 呼叫速率       | (1.0 ~ 15)默认1.5                                            |
| **outboundNumberGroups** | **body**             | **array**  | **是** | **外显号码组** | **12月01新增**                                               |
| orgNo                    | outboundNumberGroups | String     | 是     | 供电单位code   |                                                              |
| outboundNumber           | outboundNumberGroups | String     | 是     | 外显号码       |                                                              |
| serviceId                | outboundNumberGroups | String     | 是     | 技能组id       |                                                              |

返回示例

200 Response

```java
{
 "status": "0",
 "message": "操作成功"
}
```

***\*返回结果\****

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | none | Inline   |

***\*返回数据结构\****

状态码 **200**

| 名称    | 类型   | 必选 | 约束 | 中文名     | 说明 |
| ------- | ------ | ---- | ---- | ---------- | ---- |
| status  | string | true | none | 响应状态码 | none |
| message | string | true | none | 状态说明   | none |

##### 2.POST 修改任务 ***

POST /updateJob

修改外呼任务

Body 请求参数

```json
{
 "accessToken": "{{token}}",
 "jobName": "任务名称20240731",
 "description": "任务描述",
 "jobType": "1",
 "skgroups": [
  "测试技能组1",
  "测试技能组2"
 ],
 "outboundNumber": "02133195795",
 "alertTimelen": "35",
 "repeatConfs": [
  {
   "frequence": "1",
   "status": "3",
   "interval": "10"
  },
  {
   "frequence": "1",
   "status": "4",
   "interval": "10"
  }
 ],
 "chgroupName": "龙龙通道测试三四",
 "scheduleName": "测试配置日程09",
 "blacklistName": [
  "黑名单1",
  "黑名单2"
 ],
 "continuousSeconds": "100",
 "continuousFailed": "100",
 "ringingReco": "1",
 "speed": "1"
}
```

***\*请求参数\****

| 名称                     | 位置                 | 类型         | 必选   | 中文名         | 说明                                                         |
| ------------------------ | -------------------- | ------------ | ------ | -------------- | ------------------------------------------------------------ |
| body                     | body                 | object       | 否     |                | none                                                         |
| accessToken              | body                 | string       | 是     | AccessToken    | none                                                         |
| oldJobName               | body                 | string       | 是     | 旧的任务名称   | 不能包含特殊字符("[~!?@#$￥%&*！？……<>{}+=—·`^,，。:;：；‘]  |
| newjobName               | body                 | string       | 是     | 新的任务名称   | 不能包含特殊字符("[~!?@#$￥%&*！？……<>{}+=—·`^,，。:;：；‘]  |
| description              | body                 | string       | 否     | 任务描述       | none                                                         |
| jobType                  | body                 | string       | 否     | 任务类型       | 1自动语音 2预测式 3外呼通知式                                |
| ~~outboundNumber~~         | ~~body~~               | ~~string~~     | ~~否~~  | ~~外显号~~       | ~~机器人号码，接入号~~ 12月01：删除                            |
| alertTimelen             | body                 | string       | 否     | 振铃时长       | none                                                         |
| repeatConfs              | body                 | [object]     | 否     | 重呼配置       | none                                                         |
| frequence                | body                 | string       | 是     | 重呼次数       | 1~5次                                                        |
| status                   | body                 | string       | 是     | 重呼状态       | 1 无效号码 2 无人接听 3 振铃放弃 4 线路故障 5 加拨零         |
| interval                 | body                 | string       | 是     | 重呼间隔       | 单位分钟                                                     |
| chgroupName              | body                 | string       | 否     | 通道组名称     | none                                                         |
| scheduleName             | body                 | string       | 否     | 日程名称       | none                                                         |
| blacklistName            | body                 | [string]     | 否     | 黑名单列表     | [“黑名单1”,”黑名单2”]                                        |
| ~~skgroups~~             | ~~body~~           | ~~[string]~~ | ~~否~~   | ~~技能组列表~~   | ~~如果任务类型为 “预测式” 时,技能组必须填写,填写技能组名称[“技能组2”,”技能组1”]~~ 12月01：删除|
| continuousSeconds        | body                 | string       | 否     | 连续秒挂量     | (0-1000) 如果不填默认20                                      |
| continuousFailed         | body                 | string       | 否     | 连续失败量     | (0-1000) 如果不填默认50                                      |
| **outboundNumberGroups** | **body**             | **array**    | **是** | **外显号码组** | **12月01新增**                                               |
| orgNo                    | outboundNumberGroups | String       | 是     | 供电单位code   |                                                              |
| outboundNumber           | outboundNumberGroups | String       | 是     | 外显号码       |                                                              |
| serviceId                | outboundNumberGroups | String       | 是     | 技能组id       |                                                              |

返回示例

200 Response

```json
{
 "status": "0",
 "message": "操作成功"
}
```

***\*返回结果\****

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | none | Inline   |

***\*返回数据结构\****

状态码 **200**

| 名称    | 类型   | 必选 | 约束 | 中文名     | 说明 |
| ------- | ------ | ---- | ---- | ---------- | ---- |
| status  | string | true | none | 响应状态码 | none |
| message | string | true | none | 状态说明   | none |

##### 3.POST 修改任务状态

POST /updateJobStatus

启用/停用/删除任务接口

```java
Body 请求参数

{
 "jobName": "测试4444",
 "status": "3",
 "accessToken": "{{token}}"
}
```



***\*请求参数\****

| 名称        | 位置 | 类型   | 必选 | 中文名      | 说明                             |
| ----------- | ---- | ------ | ---- | ----------- | -------------------------------- |
| body        | body | object | 否   |             | none                             |
| jobName     | body | string | 是   | 任务名称    | none                             |
| status      | body | string | 是   | 操作状态    | 1 启用任务 2 停用任务 3 删除任务 |
| accessToken | body | string | 是   | AccessToken | AccessToken                      |

返回示例

200 Response

```java
{
 "status": "0",
 "message": "操作成功"
}
```

***\*返回结果\****

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | none | Inline   |

***\*返回数据结构\****

状态码 **200**

| 名称    | 类型   | 必选 | 约束 | 中文名 | 说明 |
| ------- | ------ | ---- | ---- | ------ | ---- |
| status  | string | true | none |        | none |
| message | string | true | none |        | none |

##### 4.POST 查询任务列表

POST /queryJobList

查询任务列表

```java
Body 请求参数

{
 "entName": "测试4444"
}
```



***\*请求参数\****

| 名称    | 位置 | 类型   | 必选 | 中文名   | 说明 |
| ------- | ---- | ------ | ---- | -------- | ---- |
| body    | body | object | 否   |          | none |
| entName | body | string | 是   | 企业编号 | none |

返回示例

200 Response

```java
{
 "status": "0",
 "message": "操作成功",
 "data": [
  {
   "jobId": "211298",
   "jobName": "重呼策略测试",
   "createTime": "2024-07-18 18:06:24"
  },
  {
   "jobId": "211297",
   "jobName": "任务名称20240717",
   "createTime": "2024-07-17 11:52:57"
  },
  {
   "jobId": "211246",
   "jobName": "测试通知式02",
   "createTime": "2023-11-20 13:57:51"
  },
  {
   "jobId": "211245",
   "jobName": "测试通知式01",
   "createTime": "2023-11-20 13:43:58"
  },
  {
   "jobId": "211244",
   "jobName": "测试外呼通知式",
   "createTime": "2023-11-20 13:42:29"
  },
  {
   "jobId": "211042",
   "jobName": "测试外呼",
   "createTime": "2023-05-25 10:09:46"
  }
 ]
}
```

***\*返回结果\****

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | none | Inline   |

***\*返回数据结构\****

状态码 **200**

| 名称       | 类型     | 必选 | 约束 | 中文名       | 说明                |
| ---------- | -------- | ---- | ---- | ------------ | ------------------- |
| status     | string   | true | none | 响应状态码   | none                |
| message    | string   | true | none | 状态说明     | none                |
| data       | [object] | true | none | 外呼任务列表 | none                |
| jobId      | string   | true | none | 任务Id       | none                |
| jobName    | string   | true | none | 任务名称     | none                |
| createTime | string   | true | none | 创建时间     | yyyy-MM-dd HH:mm:ss |

#### 呼叫/批次管理类

##### 1.POST 新增批次

POST /insertBatch

新增批次

```java
Body 请求参数

{
 "accessToken": "{{token}}",
 "jobName": "任务20240731",
 "description": "",
 "batchName": "批次20240731"
}
```



***\*请求参数\****

| 名称        | 位置 | 类型   | 必选 | 中文名      | 说明        |
| ----------- | ---- | ------ | ---- | ----------- | ----------- |
| body        | body | object | 否   |             | none        |
| accessToken | body | string | 是   | AccessToken | AccessToken |
| jobName     | body | string | 是   | 任务名称    | none        |
| description | body | string | 否   | 批次描述    | none        |
| batchName   | body | string | 是   | 批次名称    | none        |

返回示例

200 Response

```java
{
 "status": "0",
 "message": "操作成功"
}
```



***\*返回结果\****

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | none | Inline   |

***\*返回数据结构\****

状态码 **200**

| 名称    | 类型   | 必选 | 约束 | 中文名     | 说明 |
| ------- | ------ | ---- | ---- | ---------- | ---- |
| status  | string | true | none | 响应状态码 | none |
| message | string | true | none | 状态说明   | none |

***\*枚举值\****

| 属性   | 值   |
| ------ | ---- |
| status | 0    |
| status | 1    |
| status | 2    |

##### 2.POST 修改批次

POST /updateBatch

修改批次

Body 请求参数

```java
{
 "accessToken": "{{token}}",
 "jobName": "任务20240731",
 "description": "",
 "batchName": "批次20240731"
}
```



***\*请求参数\****

| 名称         | 位置 | 类型   | 必选 | 中文名       | 说明        |
| ------------ | ---- | ------ | ---- | ------------ | ----------- |
| body         | body | object | 否   |              | none        |
| accessToken  | body | string | 是   | AccessToken  | AccessToken |
| jobName      | body | string | 是   | 任务名称     | none        |
| description  | body | string | 否   | 批次描述     | none        |
| oldBatchName | body | string | 是   | 旧的批次名称 | none        |
| newBatchName | body | string | 是   | 新的批次名称 | none        |

返回示例

200 Response

```java
{
 "status": "0",
 "message": "操作成功"
}
```



***\*返回结果\****

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | none | Inline   |

***\*返回数据结构\****

状态码 **200**

| 名称    | 类型   | 必选 | 约束 | 中文名     | 说明 |
| ------- | ------ | ---- | ---- | ---------- | ---- |
| status  | string | true | none | 响应状态码 | none |
| message | string | true | none | 状态说明   | none |

***\*枚举值\****

| 属性   | 值   |
| ------ | ---- |
| status | 0    |
| status | 1    |
| status | 2    |

##### 3.POST 修改批次状态

POST /updateBatchStatus

启用/停用/删除批次接口

Body 请求参数

```java
{
 "jobName": "任务名称",
 "batchName": "批次名称",
 "accessToken": "{{token}}",
 "status": "0"
}
```



***\*请求参数\****

| 名称        | 位置 | 类型   | 必选 | 中文名      | 说明                             |
| ----------- | ---- | ------ | ---- | ----------- | -------------------------------- |
| body        | body | object | 否   |             | none                             |
| jobName     | body | string | 是   | 任务名称    | none                             |
| batchName   | body | string | 是   | 批次名称    | none                             |
| status      | body | string | 是   | 操作状态    | 1 启用批次 2 停用批次 3 删除批次 |
| accessToken | body | string | 是   | AccessToken | AccessToken                      |

返回示例

200 Response

```java
{
 "status": "0",
 "message": "操作成功"
}
```



***\*返回结果\****

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | none | Inline   |

***\*返回数据结构\****

状态码 **200**

| 名称    | 类型   | 必选 | 约束 | 中文名 | 说明 |
| ------- | ------ | ---- | ---- | ------ | ---- |
| status  | string | true | none |        | none |
| message | string | true | none |        | none |

##### 4.POST 查询批次列表

POST /queryBatchByJobNameAndEntName

查询任务列表

Body 请求参数

```java
{
 "jobName": "任务名称",
 "entName": "企业名称"
}
```



***\*请求参数\****

| 名称    | 位置 | 类型   | 必选 | 中文名   | 说明 |
| ------- | ---- | ------ | ---- | -------- | ---- |
| body    | body | object | 否   |          | none |
| entName | body | string | 是   | 企业编号 | none |
| jobName | body | string | 是   | 任务名称 | none |

返回示例

200 Response

```java
{
 "status": "0",
 "message": "操作成功",
 "data": [
  {
   "jobId": "211265",
   "batchId": "222258",
   "batchName": "批次01",
   "description": "批次描述",
   "createTime": "2023-12-29 18:09:05"
  },
  {
   "jobId": "211265",
   "batchId": "222260",
   "batchName": "1",
   "description": "",
   "createTime": "2024-02-02 09:31:59"
  }
 ]
}
```



***\*返回结果\****

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | none | Inline   |

***\*返回数据结构\****

状态码 **200**

| 名称        | 类型     | 必选 | 约束 | 中文名       | 说明                |
| ----------- | -------- | ---- | ---- | ------------ | ------------------- |
| status      | string   | true | none | 响应状态码   | none                |
| message     | string   | true | none | 状态说明     | none                |
| data        | [object] | true | none | 外呼任务列表 | none                |
| jobId       | string   | true | none | 任务Id       | none                |
| batchId     | string   | true | none | 批次Id       | none                |
| batchName   | string   | true | none | 批次名称     | none                |
| description | string   | true | none | 批次描述     | none                |
| createTime  | string   | true | none | 创建时间     | yyyy-MM-dd HH:mm:ss |

#### 呼叫/数据导入类 ***

##### 1.POST 导入号码

POST /importMobile

数据导入进行呼叫

Body 请求参数

```json
{
 "jobName": "重呼策略测试",
 "batchName": "批次01",
 "batchUserStatus": "startup",
 "callData": [
  {
   "extData": "$age=18&$name=张三",
   "mobile": "15135150089"
  },
  {
   "extData": "$age=18&$name=李四",
   "mobile": "15135150010"
  }
 ],
 "accessToken": "{{token}}",
 "jobUserStatus": "startup",
 "checkChannelStatus": **false**,
 "checkJobStatus": **false**,
 "checkMobile": **false**,
 "deduplicationType": 1
}
```



***\*请求参数\****

| 名称               | 位置 | 类型     | 必选 | 中文名           | 说明                                                         |
| ------------------ | ---- | -------- | ---- | ---------------- | ------------------------------------------------------------ |
| body               | body | object   | 否   |                  | none                                                         |
| accessToken        | body | string   | 是   | AccessToken      | none                                                         |
| jobName            | body | string   | 否   | 任务名称         | 如果任务ID参数已传，可以不传                                 |
| jobId              | body | string   | 否   | 任务Id           | 如果任务名称参数已传，可以不传                               |
| batchName          | body | string   | 否   | 批次名称         | 没有或者为空：则使用最后创建的批次                           |
| callData           | body | [object] | 是   | 呼叫数据列表     | none                                                         |
| extData            | body | string   | 否   | 扩展字段         | 扩展业务数据，字段以"$"开头,多字段用&拼接，参考示例：$name=XM&$money=1928374 |
| callStartTime      | body | string   | 否   | 开始呼叫时间     | yyyy-MM-dd HH:mm:ss                                          |
| mobile             | body | string   | 是   | 电话号码         | none                                                         |
| jobUserStatus      | body | string   | 否   | 任务状态         | 没有或者为空：导入后不进行操作                               |
| batchUserStatus    | body | string   | 否   | 批次状态         | 没有或者为空：导入后不进行操作                               |
| checkChannelStatus | body | boolean  | 否   | 是否检测通道组   | 是否检测外呼通道数，默认false，不检测，即使通道数不够继续导入号码;true 检测通道数，没有空闲通道不继续导入号码 |
| checkJobStatus     | body | boolean  | 否   | 是否检测任务状态 | 任务状态异常是否继续导入号码： 默认 false：任务异常继续导入 true：任务异常不导入 |
| checkMobile        | body | boolean  | 否   | 是否检测电话号码 | 是否检测号码默认 false 不检测 ;true 检测号码，不符合号码规则不继续导入号码，仅适用于一次导入单个号码的情况 |
| deduplicationType  | body | string   | 否   | 是否排重         | 不传或者传1默认不排重，2当前数据callData排重，3：【】批次排重，4：任务排重 |
| cityOrgNo          | body | String   | true | 市级供电单位编码 | 按照保底库里检索，如果不存在则失败。  **12月01**             |
| orgNo              | body | String   | true | 用户工单单位编码 | 按照用户供电单位匹配技能组外显号码，如若不存在走cityOrgNo去匹配  **12月01** |

***\*详细说明\****

**jobUserStatus**: 没有或者为空：导入后不进行操作 "startup"：导入后启动任务 "stop" : 导入后暂停任务

**batchUserStatus**: 没有或者为空：导入后不进行操作 "startup"：导入后启动批次 "stop" : 导入后暂停批次

返回示例

200 Response

```json
{
 "status": "0",
 "message": "操作成功"
}
```



***\*返回结果\****

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | none | Inline   |

***\*返回数据结构\****

状态码 **200**

| 名称    | 类型   | 必选 | 约束 | 中文名     | 说明                               |
| ------- | ------ | ---- | ---- | ---------- | ---------------------------------- |
| status  | string | true | none | 响应状态码 | 0-操作成功；1-操作失败；2-认证失败 |
| message | string | true | none | 状态说明   | none                               |

##### 2.POST 获取号码详情  ---待补充中文描述

POST /getMobileCallStatus

获取号码状态

Body 请求参数

```json
{
 "jobName": "重呼策略测试",
 "batchName": "批次01",
 "accessToken": "{{token}}",
 "telephone": "15135150060"
}
```



***\*请求参数\****

| 名称        | 位置 | 类型   | 必选 | 中文名      | 说明                        |
| ----------- | ---- | ------ | ---- | ----------- | --------------------------- |
| body        | body | object | 否   |             | none                        |
| jobName     | body | string | 是   | 任务名称    | none                        |
| batchName   | body | string | 否   | 批次名称    | 不传默认为最近批次          |
| accessToken | body | string | 是   | AccessToken | none                        |
| telephone   | body | string | 是   | 号码        | 多个号码之间用英文逗号连接) |

返回示例

200 Response

```json
{
 "status": "0",
 "message": "操作成功",
 "data": [
  {
   "telId": 103658963,
   "telephone": "15135150060",
   "status": 100
  },
  {
   "telId": 103658964,
   "telephone": "15135150060",
   "status": 100
  }
 ]
}
```

***\*返回结果\****

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | none | Inline   |

***\*返回数据结构\****

状态码 **200**

| 名称      | 类型     | 必选 | 约束 | 中文名 | 说明 |
| --------- | -------- | ---- | ---- | ------ | ---- |
| status    | string   | true | none |        | none |
| message   | string   | true | none |        | none |
| data      | [object] | true | none |        | none |
| telId     | integer  | true | none |        | none |
| telephone | string   | true | none |        | none |
| status    | integer  | true | none |        | none |

##### 3.POST 删除号码

POST /deletlMobile

删除未呼叫的号码

Body 请求参数

```json
{
 "jobName": "重呼策略测试",
 "batchName": "批次01",
 "accessToken": "{{token}}",
 "telephone": "15135150060"
}
```

***\*请求参数\****

| 名称        | 位置 | 类型   | 必选 | 中文名      | 说明                           |
| ----------- | ---- | ------ | ---- | ----------- | ------------------------------ |
| body        | body | object | 否   |             | none                           |
| jobName     | body | string | 否   | 任务名称    | 如果任务ID参数已传，可以不传   |
| jobId       | body | string | 否   | 任务id      | 如果任务名称参数已传，可以不传 |
| batchName   | body | string | 否   | 批次名称    | 不传默认为最近批次             |
| accessToken | body | string | 是   | AccessToken | none                           |
| telephone   | body | string | 是   | 号码        | 多个号码之间用英文逗号连接)    |

返回示例

200 Response

```json
{
 "status": "0",
 "message": "操作成功"
}
```



***\*返回结果\****

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | none | Inline   |

***\*返回数据结构\****

状态码 **200**

| 名称    | 类型   | 必选 | 约束 | 中文名 | 说明 |
| ------- | ------ | ---- | ---- | ------ | ---- |
| status  | string | true | none |        | none |
| message | string | true | none |        | none |

#### 呼叫/录音类

##### 1.POST 查询录音

POST /findRecordBySessionId

根据sessionId查询录音的接口

Body 请求参数

```json
{
 "sessionId": "2118346819812652520",
 "accessToken": "{{token}}"
}
```



***\*请求参数\****

| 名称        | 位置 | 类型   | 必选 | 中文名      | 说明 |
| ----------- | ---- | ------ | ---- | ----------- | ---- |
| body        | body | object | 否   |             | none |
| sessionId   | body | string | 是   | 会话Id      | none |
| accessToken | body | string | 是   | AccessToken | none |

返回示例

200 Response

```json
{
 "status": "0",
 "message": "http://www.yuming.com/cca/record/127.0.0.1/dat/record/ROBOT6666/IVR/2024-03-01/1d65e1358a02f5e8_19135416952_01068778802.wav"
}
```



***\*返回结果\****

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | none | Inline   |

***\*返回数据结构\****

状态码 **200**

| 名称    | 类型   | 必选 | 约束 | 中文名 | 说明 |
| ------- | ------ | ---- | ---- | ------ | ---- |
| status  | string | true | none |        | none |
| message | string | true | none |        | none |

##### 2.POST 外呼通知式修改指定批次的录音

POST /{accessToken}/uploadAudioFile

外呼通知式类型的任务修改指定批次的录音

Body 请求参数

```json
jobName: ""
batchName: ""
file: ""
```



***\*请求参数\****

| 名称        | 位置 | 类型           | 必选 | 中文名 | 说明     |
| ----------- | ---- | -------------- | ---- | ------ | -------- |
| accessToken | path | string         | 是   |        | none     |
| body        | body | object         | 否   |        | none     |
| jobName     | body | string         | 是   |        | 任务名称 |
| batchName   | body | string         | 是   |        | 批次名称 |
| file        | body | string(binary) | 否   |        | 录音文件 |

返回示例

200 Response

```json
{
 "status": "0",
 "message": "操作成功"
}
```

***\*返回结果\****

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | none | Inline   |

***\*返回数据结构\****

状态码 **200**

| 名称    | 类型   | 必选 | 约束 | 中文名     | 说明 |
| ------- | ------ | ---- | ---- | ---------- | ---- |
| status  | string | true | none | 响应状态码 | none |
| message | string | true | none | 状态说明   | none |

#### 通道组管理类

##### 1.POST 新增通道组

POST /insertChgroup

新增通道组

Body 请求参数

```json
{
 "accessToken": "{{token}}",
 "description": "",
 "channelName": "通道组3",
 "channelCapacity": "1"
}
```



***\*请求参数\****

| 名称            | 位置 | 类型   | 必选 | 中文名      | 说明        |
| --------------- | ---- | ------ | ---- | ----------- | ----------- |
| body            | body | object | 否   |             | none        |
| accessToken     | body | string | 是   | AccessToken | AccessToken |
| description     | body | string | 是   | 通道组名称  | none        |
| channelName     | body | string | 是   | 通道组数量  | none        |
| channelCapacity | body | string | 否   | 通道组描述  | none        |

返回示例

200 Response

```json
{
 "status": "0",
 "message": "操作成功"
}
```



***\*返回结果\****

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | none | Inline   |

***\*返回数据结构\****

状态码 **200**

| 名称    | 类型   | 必选 | 约束 | 中文名     | 说明 |
| ------- | ------ | ---- | ---- | ---------- | ---- |
| status  | string | true | none | 响应状态码 | none |
| message | string | true | none | 状态说明   | none |

***\*枚举值\****

| 属性   | 值   |
| ------ | ---- |
| status | 0    |
| status | 1    |
| status | 2    |

##### 2.POST 查询通道组

POST /getChannelAll

查询通道组详情

Body 请求参数

```json
{
 "channelName": "测试",
 "accessToken": "{{token}}"
}
```



***\*请求参数\****

| 名称        | 位置 | 类型   | 必选 | 中文名      | 说明                 |
| ----------- | ---- | ------ | ---- | ----------- | -------------------- |
| body        | body | object | 否   |             | none                 |
| channelName | body | string | 否   | 通道组名称  | 如果不填默认查询全部 |
| accessToken | body | string | 是   | AccessToken | none                 |

返回示例

```json
{
 "status": "0",
 "message": "操作成功",
 "data": [
  {
   "channelName": "测试",
   "channelCapacity": "10",
   "description": "",
   "chgroupId": "241050",
   "createTime": "2023-11-06 11:54:17",
   "channelStatus": "执行中",
   "jobList": [
    "任务1113",
    "任务3111",
    "任务11141619",
    "测试外呼通知式",
    "测试通知式01",
    "测试通知式02",
    "测试99",
    "测试录音",
    "测试录音01",
    "任务测试88",
    "任务名称20240717"
   ]
  }
 ]
}

{
 "status": "2",
 "message": "认证失败"
}
```



***\*返回结果\****

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | none | Inline   |

***\*返回数据结构\****

状态码 **200**

| 名称            | 类型     | 必选  | 约束 | 中文名 | 说明           |
| --------------- | -------- | ----- | ---- | ------ | -------------- |
| status          | string   | true  | none |        | 接口状态码     |
| message         | string   | true  | none |        | 接口状态信息   |
| data            | [object] | true  | none |        | 通道列表数据   |
| channelName     | string   | false | none |        | 通道名称       |
| channelCapacity | string   | false | none |        | 通道组数量     |
| description     | string   | false | none |        | 通道组描述     |
| chgroupId       | string   | false | none |        | 通道组id       |
| createTime      | string   | false | none |        | 通道组创建时间 |
| channelStatus   | string   | false | none |        | 通道组状态     |
| jobList         | [string] | false | none |        | 关联任务名称   |

##### 3.POST 修改通道组状态

POST /updateChannelStatus

启用/停用/删除通道组接口

Body 请求参数

```json
{
 "channelName": "测试",
 "status": "0",
 "accessToken": "{{token}}"
}
```



***\*请求参数\****

| 名称        | 位置 | 类型   | 必选 | 中文名      | 说明                                   |
| ----------- | ---- | ------ | ---- | ----------- | -------------------------------------- |
| body        | body | object | 否   |             | none                                   |
| channelName | body | string | 是   | 通道组名称  | none                                   |
| status      | body | string | 是   | 操作状态    | 1 启用通道组 2 停用通道组 3 删除通道组 |
| accessToken | body | string | 是   | AccessToken | AccessToken                            |

返回示例

200 Response

```json
{
 "status": "0",
 "message": "操作成功"
}
```



***\*返回结果\****

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | none | Inline   |

***\*返回数据结构\****

状态码 **200**

| 名称    | 类型   | 必选 | 约束 | 中文名 | 说明 |
| ------- | ------ | ---- | ---- | ------ | ---- |
| status  | string | true | none |        | none |
| message | string | true | none |        | none |

#### 日程管理类

##### 1.POST 新增日程

POST /insertSchedule

新增日程

```json
Body 请求参数

{
 "accessToken": "{{token}}",
 "scheduleName": "日程20240731",
 "description": "",
 "startDate": "2021-08-01 18:13:17",
 "endDate": "2050-09-01 18:13:17",
 "weekPeriods": "1|2|3|4|5|6|0",
 "timePeriods": "00:00-23:59"
}
```



***\*请求参数\****

| 名称         | 位置 | 类型   | 必选 | 中文名      | 说明                |
| ------------ | ---- | ------ | ---- | ----------- | ------------------- |
| body         | body | object | 否   |             | none                |
| accessToken  | body | string | 是   | AccessToken | AccessToken         |
| scheduleName | body | string | 是   | 日程名称    | none                |
| description  | body | string | 否   | 日程描述    | none                |
| startDate    | body | string | 是   | 开始时间    | yyyy-MM-dd HH:mm:ss |
| endDate      | body | string | 是   | 结束时间    | yyyy-MM-dd HH:mm:ss |
| weekPeriods  | body | string | 是   | 星期        | 多个星期用          |
| timePeriods  | body | string | 是   | 执行时段    | 多个时段用          |

返回示例

200 Response

```json
{
 "status": "0",
 "message": "操作成功"
}
```



***\*返回结果\****

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | none | Inline   |

***\*返回数据结构\****

状态码 **200**

| 名称    | 类型   | 必选 | 约束 | 中文名     | 说明 |
| ------- | ------ | ---- | ---- | ---------- | ---- |
| status  | string | true | none | 响应状态码 | none |
| message | string | true | none | 状态说明   | none |

***\*枚举值\****

| 属性   | 值   |
| ------ | ---- |
| status | 0    |
| status | 1    |
| status | 2    |

##### 2.POST 查询日程

POST /getScheduleAll

查询日程

Body 请求参数

```json
{
 "accessToken": "{{token}}",
 "scheduleName": "日程ll2323l"

```

***\*请求参数\****

| 名称         | 位置 | 类型   | 必选 | 中文名      | 说明                 |
| ------------ | ---- | ------ | ---- | ----------- | -------------------- |
| body         | body | object | 否   |             | none                 |
| scheduleName | body | string | 否   | 日程名称    | 如果不填默认查询全部 |
| accessToken  | body | string | 是   | AccessToken | none                 |

返回示例

200 Response

```json
{
 "status": "0",
 "message": "操作成功",
 "data": [
  {
   "scheduleName": "日程lll",
   "description": "",
   "scheduleId": "231124",
   "createTime": "2024-03-04 18:00:24",
   "startTime": "2024-03-05",
   "endTime": "2029-03-25",
   "weekdays": "0|1|2|3|4|5|6",
   "timePeriods": "09:00-21:06",
   "schedulelStatus": "执行中",
   "jobList": [
    "无锡司法测试任务重呼",
    "尺寸非常",
    "智能核查任务测试-zz"
   ]
  }
 ]
}
```



***\*返回结果\****

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | none | Inline   |

***\*返回数据结构\****

状态码 **200**

| 名称            | 类型     | 必选  | 约束 | 中文名           | 说明                |
| --------------- | -------- | ----- | ---- | ---------------- | ------------------- |
| status          | string   | true  | none |                  | none                |
| message         | string   | true  | none |                  | none                |
| data            | [object] | true  | none |                  | none                |
| scheduleName    | string   | false | none | 日程名称         | none                |
| description     | string   | false | none | 日程描述         | none                |
| scheduleId      | string   | false | none | 日程id           | none                |
| createTime      | string   | false | none | 日程创建时间     | yyyy-MM-dd HH:mm:ss |
| startTime       | string   | false | none | 开始时间         | yyyy-MM-dd          |
| endTime         | string   | false | none | 结束时间         | yyyy-MM-dd          |
| weekdays        | string   | false | none | 星期             | 多个星期用          |
| timePeriods     | string   | false | none | 时段             | 多个时段用          |
| schedulelStatus | string   | false | none | 日程状态         | none                |
| jobList         | [string] | false | none | 此日程关联的任务 | none                |

##### 3.POST 修改日程状态

POST /updateScheduleStatus

启用/停用/删除日程接口

Body 请求参数

```json
{
 "scheduleName": "测试4444",
 "status": "1",
 "accessToken": "{{token}}"
}
```



***\*请求参数\****

| 名称         | 位置 | 类型   | 必选 | 中文名      | 说明                             |
| ------------ | ---- | ------ | ---- | ----------- | -------------------------------- |
| body         | body | object | 否   |             | none                             |
| scheduleName | body | string | 是   | 日程名称    | none                             |
| status       | body | string | 是   | 操作状态    | 1 启用日程 2 停用日程 3 删除日程 |
| accessToken  | body | string | 是   | AccessToken | AccessToken                      |

返回示例

200 Response

{
 "status": "0",
 "message": "操作成功"
}

***\*返回结果\****

| 状态码 | 状态码含义                                              | 说明 | 数据模型 |
| ------ | ------------------------------------------------------- | ---- | -------- |
| 200    | [OK](https://tools.ietf.org/html/rfc7231#section-6.3.1) | none | Inline   |

***\*返回数据结构\****

状态码 **200**

| 名称    | 类型   | 必选 | 约束 | 中文名 | 说明 |
| ------- | ------ | ---- | ---- | ------ | ---- |
| status  | string | true | none |        | none |
| message | string | true | none |        | none |

#### 通话明细推送

**推送数据说明**：挂机后推送本通会话的通话明细数据

**接口地址**：接收数据侧提供

**注意**：String类型的时间字段如无特殊说明默认格式均为 yyyy-MM-dd HH:mm:ss

***\*参数说明\*******\*:\****

| **参数名称**     | **参数类型** | **参数说明**                                     |
| ---------------- | ------------ | ------------------------------------------------ |
| comid            | String       | huayuncall（固定标识）                           |
| body             | Object       | 推送数据消息体                                   |
| extended_data    | String       | 扩展字段（外呼时有）                             |
| alert_time       | String       | 振铃时间（外呼时有）                             |
| end_type         | String       | 结束类型：见**结束类型说明**                     |
| agent_id         | String       | 坐席Id（转人工时有）                             |
| agent_name       | String       | 坐席姓名（转人工时有）                           |
| call_content     | Array        | 通话内容详情                                     |
| num              | String       | 序号                                             |
| say              | String       | 用户\机器人说内容                                |
| time             | String       | 交互时间                                         |
| type             | String       | 内容来源（用户\机器人）                          |
| user_say_type    | String       | 用户说类型：见**用户说类型说明**                 |
| robot_name       | String       | 机器人名称                                       |
| end_time         | String       | 结束时间                                         |
| telephone_number | String       | 电话号码                                         |
| session_id       | String       | 会话Id（一通电话的唯一标识）                     |
| call_duration    | String       | 会话时长（通话时长，单位秒）                     |
| sequence_number  | String       | 名单序列号（外呼时有：批次内部唯一标识）         |
| mode             | String       | 模式：机器人                                     |
| connection_time  | String       | 接通时间（外呼时有）                             |
| start_time       | String       | 开始时间                                         |
| batch_name       | String       | 批次名称（外呼时有）                             |
| job_name         | String       | 外呼任务名称（外呼时有）                         |
| call_count       | String       | 人机交互次数                                     |
| tag              | String       | 标签（多个用英文逗号隔开）                       |
| accessNum        | String       | 接入号码                                         |
| recordUrl        | String       | 录音地址                                         |
| status           | String       | 呼叫结果状态（外呼时有）见**外呼结果枚举值说明** |

**结束类型说明**

```
 0：机器人挂断 
 1：转人工
 2：客户挂断  
```



**用户说类型说明**

```
 1：用户说
 2：按键 
```



**外呼结果枚举值说明**

```
 0：未使用，1：成功，2：外线不通，3：平台错误，4：超时挂断，5：振铃放弃，6：排队放弃，7：空号，8：关机，9：不在服务区，10：无法接通，11：通话中，12：停机，13：正忙，14：识别中，15：号码有误，16：号码不存在，17：欠费，18：暂停服务 ，19：外地号码 ,20：缺少平台消息，21：加拨零，22：加零，23：手机转移， 24：无此号码，25：用户线故障，26：未开通语音通话功能，27：通话已经被限制，28：来电提醒，29：号码过期，30：暂时无法接听，31：用户不存在，32：呼叫受限，33：呼叫超时挂断 ，34：意外挂断，35：行动码重呼，36：无权接受呼叫，37：无人接听，38：呼叫失败，39：呼叫被拒绝，40：平台限制，41：黑名单限制，42：坐席登出，43：坐席跳过，44：执行出现异常，45：呼叫中，46：接通缺少统计消息，47：秒挂，48：接通超时，49：呼叫中（中断）50：平台挂断
```



**数据实例**：

**呼入**

```json
 {
  "comid": "huayuncall",
  "body": {
    "accessNum": "021xxxx5354",
    "recordUrl": "http://www.yuming.com/cca/record/dat/record/ENTID/IVR/2022-06-06/6e6296bc5a053647_xxxxxxx_021xxxx5354.mp3",
    "telephone_number": "130xxxx1307",
    "job_name": "",
    "batch_name": "",
    "sequence_number": "",
    "extended_data": "",
    "alert_time": "",
    "connection_time": "",
    "status": "",
    "start_time": "2024-06-06 15:16:09",
    "end_time": "2024-06-06 15:16:18",
    "call_duration": 9,
    "session_id": "8171325644158275038",
    "end_type": "0",
    "mode": "机器人",
    "tag": "报障",
    "robot_name": "400呼入流程",
    "call_count": "2",
    "call_content": [{
      "type": "机器人",
      "user_say_type": "",
      "say": "尊敬的客户，您好，欢迎致电中国电信",
      "time": "2024-06-06 15:11:57",
      "num": 1
    }, {
      "type": "机器人",
      "user_say_type": "",
      "say": "购买及续费请按1；技术咨询和故障申告请按2；备案服务请按3；账号计费及合同发票请按4；IT 上云请按5；央企上云咨询请按6；投诉建议请按8；VIP服务请按9”；重听请按*号键。",
      "time": "2024-06-06 15:12:03",
      "num": 2
    }, {
      "type": "用户",
      "user_say_type": "2",
      "say": "3",
      "time": "2024-06-06 15:12:06",
      "num": 3
    }, {
      "type": "机器人",
      "user_say_type": "",
      "say": "请您对我们的服务进行评价，非常满意请按1，满意请按2，一般请按3，不满意请按4",
      "time": "2024-06-06 15:16:09",
      "num": 4
    }, {
      "type": "用户",
      "user_say_type": "2",
      "say": "1",
      "time": "2024-06-06 15:16:16",
      "num": 5
    }, {
      "type": "机器人",
      "user_say_type": "",
      "say": "感谢您的参与，再见",
      "time": "2024-06-06 15:16:16",
      "num": 6
    }]
  }
}

 
```

**呼出**

```json
{
  "comid": "huayuncall",
  "body": {
    "recordUrl": "http://ip:port/cca/record/10.40.100.201/dat/record/LBBXX/IVR/2024-06-18/6f66712ad6001a7c_010xxxx8764_133xxxx7418.mp3",
    "accessNum": "010xxxx8764",
    "telephone_number": "13xxxx7418",
    "job_name": "xx车险外呼任务",
    "batch_name": "批次01",
    "sequence_number": "31",
    "extended_data": "$name=王小花&$workId=campaignTaskIa06f3b8fd9844565a08d3166eb46b3a9",
    "alert_time": "2024-06-18 14:35:59",
    "connection_time": "2024-06-18 14:36:02",
    "status": "1",
    "start_time": "2024-06-18 14:36:12",
    "end_time": "2024-06-18 14:37:05",
    "call_duration": 53,
    "session_id": "8027227814627383932",
    "end_type": "0",
    "mode": "机器人",
    "tag": "满意,是本人",
    "robot_name": "智能IVR",
    "call_count": "3",
    "call_content": [{
      "type": "机器人",
      "user_say_type": "",
      "say": "您好！我是xx保险的客服人员，您在近期购买了我司的车险，想耽误您1分钟做一个满意度调查，请问您是王小花本人吗",
      "time": "2024-06-18 14:36:02",
      "num": 1
    }, {
      "type": "用户",
      "user_say_type": "1",
      "say": "是的",
      "time": "2024-06-18 14:36:17",
      "num": 2
    }, {
      "type": "机器人",
      "user_say_type": "",
      "say": "好的，那请问您在购买保险的过程中，对销售人员的服务是否满意呢",
      "time": "2024-06-18 14:36:17",
      "num": 3
    }, {
      "type": "用户",
      "user_say_type": "1",
      "say": "满意",
      "time": "2024-06-18 14:36:25",
      "num": 4
    }, {
      "type": "机器人",
      "user_say_type": "",
      "say": "好的，那么根据本次服务的感受，请问您是否愿意向朋友或他人，推荐xx保险呢？推荐度0到9分，9分最高，请您以0到9按键方式进行打分",
      "time": "2024-06-18 14:36:25",
      "num": 5
    }, {
      "type": "用户",
      "user_say_type": "2",
      "say": "8",
      "time": "2024-06-18 14:36:39",
      "num": 6
    }, {
      "type": "机器人",
      "user_say_type": "",
      "say": "好的，感谢您的接听，您可以前往xx保险公众号添加专属企微管家，后续您查保单、使用服务、理赔报案等，都可以咨询我们。祝您生活愉快，再见。",
      "time": "2024-06-18 14:36:39",
      "num": 7
    }]
  }
}
```



#### 人机交互明细查询

**简要描述**

• 20250328版本，返回status从string类型改为int

**请求URL**

• /rbc_web/rest/callDetail/botAndUserSimple

**请求方式**

• get

**请求Query参数**

| 参数名  | 示例值              | 必选 | 类型   | 说明   |
| ------- | ------------------- | ---- | ------ | ------ |
| entID   | ROBOT666            | 是   | string | 企业ID |
| session | 2118864608353528303 | 是   | string | 会话ID |



**成功返回示例**

```json
{
 "status": 1,
 "msg": "请求成功",
 "data": {
  "content": {
   "dataId": "2118864608353528303",
   "sessionId": "2118864608353528303",
   "entId": "ROBOT6666",
   "robotId": "6447018502",
   "robotName": "zq测试场景",
   "sceneId": "1869590941231648768",
   "sceneName": "企业意图库",
   "accessNum": "01068778802",
   "phoneNum": "19828360146",
   "origdnis": "19828360146",
   "localUrl": "19828360146",
   "remoteUrl": "01068778802",
   "startTime": "2025-02-21 14:52:04",
   "endTime": "2025-02-21 14:52:41",
   "callType": "1",
   "connectFlag": "1",
   "hookFlag": "2",
   "turnUserFlag": "2",
   "turnUserResult": "2",
   "meetNum": 1,
   "interCount": 1,
   "muteCount": 1,
   "duration": 37,
   "hangupNodeId": "1869590941231648769",
   "hangupNodeName": "企业意图库",
   "hangupPatterId": "1869590941877571584",
   "soundFile": "dat/record/ROBOT6666/IVR/2025-02-21/1d67b822940f29ef_19828360146_01068778802.wav",
   "recordName": "dat/record/ROBOT6666/IVR/2025-02-21/1d67b822940f29ef_19828360146_01068778802.wav",
   "videoFiles": [],
   "videoCall": "0",
   "levels": [
    {
     "id": "6517589512",
     "name": "33"
    }
   ],
   "botAndUserBeanList": [
    {
     "detailId": "17401207241504050",
     "callTime": "2025-02-21 14:52:04",
     "entId": "ROBOT6666",
     "userType": "1",
     "contentBot": "请说：自动更新或者不自动更新；测试未识别和超时请按键1.",
     "nodeId": "1869590941231648769",
     "patterId": "1869590941877571584",
     "patterName": "企业意图库",
     "patterType": "1"
    },
    {
     "detailId": "17401207403800534",
     "callTime": "2025-02-21 14:52:20",
     "entId": "ROBOT6666",
     "userType": "1",
     "contentBot": "请说：自动更新或者不自动更新；测试未识别和超时请按键1.",
     "nodeId": "1869590941231648769",
     "patterId": "1869590941877571584",
     "patterName": "企业意图库",
     "patterType": "1"
    },
    {
     "detailId": "17401207478450436",
     "callTime": "2025-02-21 14:52:27",
     "entId": "ROBOT6666",
     "userType": "2",
     "nodeId": "1869590941231648769",
     "patterId": "1869590941877571584",
     "patterName": "企业意图库",
     "patterType": "1",
     "contentUser": "喂喂喂喂",
     "hitFlag": "2",
     "userSayType": "1"
    },
    {
     "detailId": "17401207479938115",
     "callTime": "2025-02-21 14:52:27",
     "entId": "ROBOT6666",
     "userType": "1",
     "contentBot": "请说：自动更新或者不自动更新；测试未识别和超时请按键1.",
     "nodeId": "1869590941231648769",
     "patterId": "1869590941877571584",
     "patterName": "企业意图库",
     "patterType": "1",
     "endType": "1"
    }
   ],
   "agentId": "baixp",
   "agentName": "白雪鹏"
  }
 },
 "count": null
}
```

**成功返回示例的参数说明**

| 参数                                        | 类型   | 描述                                                         |
| ------------------------------------------- | ------ | ------------------------------------------------------------ |
| status                                      | int    | 1-成功，其余失败                                             |
| msg                                         | string | 提示信息                                                     |
| data                                        | object | 返回数据                                                     |
| data.content                                | object | 会话数据                                                     |
| data.content.dataId                         | string | 十进制会话ID                                                 |
| data.content.sessionId                      | string | 十进制会话ID                                                 |
| data.content.entId                          | string | 企业ID                                                       |
| data.content.robotId                        | string | 机器人ID                                                     |
| data.content.robotName                      | string | 机器人名称                                                   |
| data.content.sceneId                        | string | 场景ID                                                       |
| data.content.sceneName                      | string | 场景名称                                                     |
| data.content.accessNum                      | string | 机器人接入号                                                 |
| data.content.phoneNum                       | string | 用户号码                                                     |
| data.content.origdnis                       | string | 原始被叫                                                     |
| data.content.localUrl                       | string | 原始呼叫方                                                   |
| data.content.remoteUrl                      | string | 原始目标方                                                   |
| data.content.startTime                      | string | 会话开始时间                                                 |
| data.content.endTime                        | string | 会话结束时间                                                 |
| data.content.callType                       | string | 呼叫类型 1、呼入 2、呼出                                     |
| data.content.connectFlag                    | string | 是否接通 0、未接通 1、接通                                   |
| data.content.hookFlag                       | string | 挂断方  0、机器人挂断 1、转人工 2、客户挂断 3、满意度流程挂断 4、满意度客户挂断 5、授权不足挂断 6、智能外拨机器人挂断 7、智能外拨客户挂断 8、智能外拨转人工 |
| data.content.turnUserFlag                   | string | 是否转人工1、转人工 2、没转人工                              |
| data.content.turnUserResult                 | string | 转人工结果1、成功 2、失败                                    |
| data.content.meetNum                        | string | 人机交互次数                                                 |
| data.content.interCount                     | string | 人机交互次数                                                 |
| data.content.muteCount                      | string | 静音次数                                                     |
| data.content.duration                       | string | 通话时长，单位秒                                             |
| data.content.hangupNodeId                   | string | 挂断节点ID                                                   |
| data.content.hangupNodeName                 | string | 挂断节点名称                                                 |
| data.content.hangupPatterId                 | string | 挂断话术ID                                                   |
| data.content.soundFile                      | string | 人机录音地址                                                 |
| data.content.recordName                     | string | 人机录音地址                                                 |
| data.content.videoFiles                     | array  | 5G视频地址列表                                               |
| data.content.videoCall                      | string | 视频通话：0-否、1-是                                         |
| data.content.levels                         | array  | 流程标签                                                     |
| data.content.levels.id                      | string | 标签ID                                                       |
| data.content.levels.name                    | string | 标签名称                                                     |
| data.content.tags                           | array  | 业务标签                                                     |
| data.content.tags.id                        | string | 标签ID                                                       |
| data.content.tags.name                      | string | 标签名称                                                     |
| data.content.botAndUserBeanList             | array  | 人机交互明细                                                 |
| data.content.botAndUserBeanList.detailId    | string | 交互ID                                                       |
| data.content.botAndUserBeanList.callTime    | string | 时间                                                         |
| data.content.botAndUserBeanList.entId       | string | 企业ID                                                       |
| data.content.botAndUserBeanList.userType    | string | 角色 1、机器人说 2、用户说，其余可忽略                       |
| data.content.botAndUserBeanList.userSayType | string | 用户说类型 1、用户说 2、按键                                 |
| data.content.botAndUserBeanList.contentBot  | string | 机器人说                                                     |
| data.content.botAndUserBeanList.nodeId      | string | 节点ID                                                       |
| data.content.botAndUserBeanList.patterId    | string | 话术ID                                                       |
| data.content.botAndUserBeanList.patterName  | string | 话术名称                                                     |
| data.content.botAndUserBeanList.patterType  | string | 话术类型：1、普通话术 2、公共话术                            |
| data.content.botAndUserBeanList.hitFlag     | string | 命中标记 1、命中2、未命中                                    |
| data.content.agentId                        | string | 监控坐席工号                                                 |
| data.content.agentName                      | string | 监控坐席名称                                                 |
| count                                       | long   |                                                              |

#### 呼叫中心明细数据推送

**推送数据说明**：挂机后推送呼叫中心明细数据

**接口地址**：接收数据侧提供

**参数说明：**

| **参数名称**       | **参数类型** | **参数说明**                                 |
| ------------------ | ------------ | -------------------------------------------- |
| entId              | String       | 企业ID                                       |
| signStr            | String       | 会话签名串 见**签名串说明**                  |
| timestamp          | String       | 时间戳 yyyyMMddHHmmss                        |
| calldata           | Object       | 推送数据消息体                               |
| sessionId          | String       | 会话ID（呼叫标识，一通电话的唯一标识）       |
| agentId            | String       | 坐席工号                                     |
| agentNum           | String       | 坐席分机号                                   |
| agentName          | String       | 坐席姓名                                     |
| skillId            | String       | 技能组ID                                     |
| skillName          | String       | 技能组名称                                   |
| startTime          | String       | 开始时间 yyyy-MM-dd HH:mm:ss                 |
| endTime            | String       | 结束时间 yyyy-MM-dd HH:mm:ss                 |
| callingNum         | String       | 主叫号码（呼入）                             |
| dialNum            | String       | 外显号码（呼出）                             |
| calledNum          | String       | 被叫号码                                     |
| queueLength        | String       | 排队时长 (单位秒)                            |
| alertLength        | String       | 振铃时长 (单位秒)                            |
| talkLength         | String       | 通话时长 (单位秒)                            |
| totalDuration      | String       | 通话总时长：包含坐席振铃，客户振铃，通话时长 |
| endType            | String       | 结束类型：详见**结束类型说明**               |
| hangupDisposition  | String       | 挂断方：详见**结束类型说明**                 |
| customerProvince   | String       | 客户电话省份                                 |
| customerCity       | String       | 客户电话城市                                 |
| satisfactionKey    | String       | 满意度评价按键                               |
| satisfactionResult | String       | 满意度评级结果                               |
| recordStartTime    | String       | 录音开始时间 yyyy-MM-dd HH:mm:ss             |
| recordEndTime      | String       | 录音结束时间 yyyy-MM-dd HH:mm:ss             |
| recordPath         | String       | 录音地址                                     |
| callType           | String       | 呼叫类型：见**呼叫类型说明**                 |
| entId              | String       | 企业ID                                       |
| ivrLength          | String       | IVR时长 (单位秒)                             |

**签名串说明**

timeStamp + "|" + entId + "|" + sessionId 的MD5值

**呼叫类型说明**

```
1：呼入
0：呼出
```

**结束类型说明**

| 结束类型 | 说明（挂断方）   |
| -------- | ---------------- |
| 202      | （呼入）排队放弃 |
| 251      | （呼入）振铃放弃 |
| 252      | （呼入）通话挂断 |
| 204      | （呼出）振铃放弃 |
| 205      | （呼出）通话挂断 |
| 200      | IVR挂断          |
| 210      | 客户挂断         |
| 211      | 坐席挂断         |
| 216      | 保持挂断         |
| 217      | 咨询挂断         |
| 218      | 会议挂断         |
| 219      | 坐席监听         |
| 220      | 全拆             |

**数据实例：**

**呼入**

```json
{
  "calldata": {
    "alertLength": "0",
    "callType": "1",
    "calledNum": "10001000111",
    "callingNum": "2427998",
    "endTime": "2024-08-15 21:39:59",
    "endType": "200",
    "entId": "VEIP",
    "handleLength": "0",
    "hangupDisposition": "IVR挂断",
    "ivrLength": "29",
    "queueLength": "0",
    "recordEndTime": "2024-08-15 21:39:59",
    "recordPath": "http://www.yuming.com/cca/record/172.21.0.16/dat/record/VEIP/IVR/2024-08-15/7066be0511004f09_10001000111_2427998.mp3",
    "recordStartTime": "2024-08-15 21:39:30",
    "sessionId": "8099369908841762569",
    "startTime": "2024-08-15 21:39:30",
    "talkLength": "29",
    "totalDuration": "29"
  },
  "entId": "VEIP",
  "signStr": "2EF552BB7FCC0B9CDAB170DAC4C5BB6C",
  "timestamp": "20240815214004"
}
```

**呼出**

```json
{
  "calldata": {
    "agentId": "songbo",
    "agentName": "宋博",
    "agentNum": "sip:70007",
    "alertLength": "4",
    "callType": "0",
    "calledNum": "Tel:15835102037",
    "callingNum": "2427998",
    "customerCity": "太原",
    "customerProvince": "山西",
    "deptName": "客服部",
    "dialNum": "2427998",
    "endTime": "2024-08-17 00:49:53",
    "endType": "210",
    "entId": "VEIP",
    "handleLength": "1",
    "hangupDisposition": "客户挂断",
    "ivrLength": "0",
    "queueLength": "0",
    "recordEndTime": "2024-08-17 00:49:53",
    "recordPath": "https://www.yuming.com/report/call/play/video/ims_6/record/VEIP/2024/08/17/8099371549301193984.wav",
    "recordStartTime": "2024-08-17 00:49:13",
    "satisfactionResult": "",
    "sessionId": "8099371549301193984",
    "startTime": "2024-08-17 00:49:08",
    "talkLength": "40",
    "totalDuration": "45"
  },
  "entId": "VEIP",
  "signStr": "51035998C2A49434BDF81254B9CE5A5D",
  "timestamp": "20240817004958"
}
```

 

## 三、公共接口

#### 1.查询供电单位列表

优先级：高

 **服务端：网格化平台**

前端需按照业务场景自行进行处理，例如父类是否可选等。

接入号绑定供电单位，绑定网格经理 选单位-在选单位下的虚拟号

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|   参数    |   参数名称   | 参数类型 | 是否必传 |                             备注                             |
| :-------: | :----------: | :------: | :------: | :----------------------------------------------------------: |
| queryType |   查询类型   |  String  |   true   | 01查询全部，02 当前单位查询本级，03 按照当前单位查询本级及包含下级，05 只查询市级 |
|   orgNo   | 当前供电单位 |  String  |    -     |                   queryType 02 ， 03时有效                   |

##### 	**返回参数**

|   **参数**    |   **参数名称**   | **参数类型** | **是否必传** | **备注** |
| :-----------: | :--------------: | :----------: | :----------: | :------: |
|     orgNo     |   供电单位编码   |    String    |     true     |          |
|    orgName    |   供电单位名称   |    String    |     true     |          |
|    pOrgNo     |     上级编码     |    String    |     true     |          |
| **childList** | **下级单位列表** |  **Array**   |      -       |          |



#### 2.保存/提交-业务受理工单信息（未完成）

优先级：高

保存 or 提交 业务受理工单工单信息。 

 **服务端：网格化平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|        参数         |      参数名称      | 参数类型  | 是否必传 |                       备注                       |
| :-----------------: | :----------------: | :-------: | :------: | :----------------------------------------------: |
|       userNo        |        工号        |  String   |   true   |                                                  |
|        appNo        |      申请编号      |  String   |    -     |                                                  |
|     callNumber      |      通话号码      |  String   |   true   |                                                  |
|      woStatus       |      工单状态      |  String   |   true   |         1.保存；2.提交；3.一次性办结工单         |
|       callId        |    通话唯一标识    |  String   |   true   |                                                  |
|         sId         | 此段通话的唯一标识 |  String   |   true   |                                                  |
|    customerName     |      客户名称      |  String   |    -     |                                                  |
|     customerId      |      用户编号      |  String   |    -     |                                                  |
|    contactPerson    |       联系人       |  String   |    -     |                                                  |
|    contactNumber    |      联系电话      |  String   |   true   |                                                  |
| electricityAddress  |      用电地址      |  String   |    -     |                                                  |
|   contactAddress    |      联系地址      |  String   |   true   |                                                  |
|     createUser      |    受理人员工号    |  String   |   true   |                  制单人,受理人                   |
|   createUserName    |      受理人员      |  String   |   true   |                  制单人,受理人                   |
|    urbanOrRural     |      城乡分类      |  String   |   true   |                                                  |
|   powerSupplyUnit   |      供电单位      |  String   |   true   |                                                  |
| powerSupplyUnitName |    供电单位名称    |  String   |   true   |                                                  |
|       region        |      所属地市      |  String   |   true   |                                                  |
|     accContent      |      受理内容      |  String   |   true   |                                                  |
|     accOpinions     |      受理意见      |  String   |    -     |                                                  |
|       remarks       |        备注        |  String   |    -     |                                                  |
|     exeAttrCode     |    特殊工单标记    |  String   |    -     |                    11：煤改电                    |
|        subWo        |      关联工单      |  String   |    -     |                                                  |
|       woType        |      工单类型      |  String   |          |     1.咨询:2.投诉:3.举报:4.意见(建议):5.故障     |
|    busiTypeCode     |      工单类型      |  String   |   true   | (1:查询咨询 2:故障报修 3:业务申请 4:紧急服务类） |
|    woSubtypeOne     |      子类型1       |  String   |   true   |                                                  |
|    woSubtypeTwo     |      子类型2       |  String   |   true   |                                                  |
|   woSubtypeThree    |      子类型3       |  String   |    -     |                                                  |
|       dispOrg       |      派发单位      |  String   |   true   |                                                  |
|    faultSymptoms    |      故障现象      |  String   |    -     |                     故障报修                     |
|      faultType      |      故障分类      |  String   |    -     |                     故障报修                     |
|     hazardLevel     |    故障危害等级    |  String   |    -     |                     故障报修                     |
|       levelNo       |     程度/等级      |  String   |    -     |                     故障报修                     |
|    faultAddress     |      故障地址      |  String   |    -     |                     故障报修                     |
|    **fileList**     |    **附件列表**    | **Array** |  **-**   |                                                  |
|      filePath       |      附件地址      |  String   |    -     |                                                  |
|      fileName       |      附件名称      |  String   |    -     |                                                  |
|       fileId        |      附件标识      |  String   |    -     |                                                  |

##### 	**返回参数**

| 参数 | 参数名称 | 参数类型 | 是否必传 | 备注 |
| :--: | :------: | :------: | :------: | :--: |
|      |          |          |          |      |
|      |          |          |          |      |







## 四、i国网移动侧接口



#### 接口统一返回参数

|  参数  |   参数名称    |   参数类型   |     备注     |
| :----: | :-----------: | :----------: | :----------: |
| status | 成功/失败标志 |    String    |   200成功    |
|  msg   | 成功/失败原因 |    String    |              |
|  data  |    数据体     | Object/Array | 列表为Array  |
| count  |   分页总数    |     int      | 只有分页存在 |



#### 1.查询当前登录人信息

查询i国网当前网格经理登录账号信息

 **服务端：网格化平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|  参数  | 参数名称 | 参数类型 | 是否必传 | 备注 |
| :----: | :------: | :------: | :------: | :--: |
| userNo |   工号   |  String  |   true   |      |
|        |          |          |          |      |

##### 	**返回参数**

|     参数      |   参数名称   | 参数类型 | 是否必传 | 备注 |
| :-----------: | :----------: | :------: | :------: | :-------------------------------------------------------: |
|   userType    | 当前用户类型 |  String  |   true   |               01网格经理，02专家，03管理员                |
|   userName    |   用户名称   |  String  |   true   |                                                           |
|     orgNo     |   供电单位   |  String  |   true   |                                                           |
|    orgName    | 供电单位名称 |  String  |   true   |                                                           |
| virtualNumber | 绑定虚拟号码 |  String  |   true   |              此网格经理被绑定的虚拟网格号码               |
|  userNumber   | 网格经理号码 |  String  |   true   |                                                           |
|               |              |          |          |                                                           |





#### 2.查询首页待处理任务

查询首页待处理任务列表

 **服务端：网格化平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|  参数  | 参数名称 | 参数类型 | 是否必传 | 备注 |
| :----: | :------: | :------: | :------: | :--: |
| userNo |   工号   |  String  |   true   |      |
|        |          |          |          |      |

##### 	**返回参数**

|          参数          |      参数名称      |  参数类型  | 是否必传 | 备注 |
| :--------------------: | :----------------: | :--------: | :------: | :-------------------------------------------------------: |
|  **PendingWorkOrder**  |   **待制单列表**   |   Object   | **true** |                                                           |
|       callNumber       |      来电号码      |   String   |   true   |                                                           |
|         callId         |      通话标识      |   String   |   true   |                                                           |
|        callTime        |      来电时间      |   String   |   true   |                    YYYY-MM-DD HH:MM:SS                    |
|     mobileLocation     |     来电归属地     |   String   |   true   |                                                           |
|     virtualNumber      |     被叫虚拟号     |   String   |   true   |                                                           |
|       userNumber       |   被叫网格经理号   |   String   |   true   |                                                           |
|         count          |     待制单总数     |    int     |   true   |                                                           |
|     **MissedCall**     |  **未接来电列表**  | **Object** | **true** |                                                           |
|       callNumber       |      来电号码      |   String   |   true   |                                                           |
|     mobileLocation     |     来电归属地     |   String   |   true   |                                                           |
|        callTime        |      来电时间      |   String   |   true   |                    YYYY-MM-DD HH:MM:SS                    |
|         count          |    未接来电总数    |    int     |   true   |                                                           |
|  **UnprocessedOrder**  | **待处理工单列表** | **Object** | **true** |                                                           |
|        activNo         |      工单环节      |   String   |    -     |                                                           |
|      activityName      |    工单环节名称    |   String   |    -     |                                                           |
|         appNo          |      申请编号      |   String   |    -     |                                                           |
|        readMark        |      签收状态      |   String   |   true   |                     01未签收02已签收                      |
|         count          |   待处理工单总数   |    int     |   true   |                                                           |
|      **kpiData**       |    **指标看板**    | **Object** | **true** |                                                           |
|   answeredCallsCount   |     接听来电数     |    int     |   true   |                            个                             |
|  answeredCallDuration  |      接听时长      |    int     |   true   |                           分钟                            |
|    missedCallsCount    |    未接听来电数    |    int     |   true   |                            个                             |
|   outboundCallsCount   |     外呼电话数     |    int     |   true   |                            个                             |
|  outboundCallDuration  |    外呼电话时长    |    int     |   true   |                           分钟                            |
| outboundCallsConnected |     外呼拨通数     |    int     |   true   |                            个                             |







#### 3.查询当前网格经理是否存在需制单通话

轮询查询当前网格经理是否存在需制单通话

 **服务端：网格化平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|  参数  | 参数名称 | 参数类型 | 是否必传 | 备注 |
| :----: | :------: | :------: | :------: | :--: |
| userNo |   工号   |  String  |   true   |      |
|        |          |          |          |      |

##### 	**返回参数**

|          参数           |    参数名称    |  参数类型  | 是否必传 | 备注 |
| :---------------------: | :------------: | :--------: | :------: | :-------------------------------------------------------: |
|      **callData**       |  **来电信息**  | **Object** | **true** |                                                           |
|         callId          |    通话标识    |   String   |   true   |                                                           |
|       callNumber        |    来电号码    |   String   |   true   |                                                           |
|     mobileLocation      |     归属地     |   String   |    -     |                                                           |
|        callTime         |    来电时间    |   String   |   true   |                    YYYY-MM-DD HH:MM:SS                    |
|      virtualNumber      |   被叫虚拟号   |   String   |   true   |                                                           |
|       userNumber        | 被叫网格经理号 |   String   |   true   |                                                           |
|     **noticeData**      |  **通知信息**  | **Object** |   true   |                                                           |
|           msg           |    消息内容    |   String   |          |                                                           |
|       noticeType        |    通知类型    |   String   |          |                                                           |
|          appNo          |    工单编号    |   String   |          |                                                           |
|    workOrderDeadline    |    工单时限    |   String   |          |                                                           |
| workOrderDeadlineStatus |  工单时限状态  |   String   |          |                                                           |
|        orderStep        |    工单环节    |   String   |          |                                                           |
|                         |                |            |          |                                                           |







#### 4.拨号外呼

 **服务端：网格化平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|     参数      |   参数名称   | 参数类型 | 是否必传 |                   备注                   |
| :-----------: | :----------: | :------: | :------: | :--------------------------------------: |
|    userNo     |     工号     |  String  |   true   |                                          |
|   consPhone   |   被叫号码   |  String  |   true   |                 外拨号码                 |
|  userNumber   | 网格经理号码 |  String  |   true   |                 前端不传                 |
| virtualNumber | 绑定虚拟号码 |  String  |   true   | 前端不传，此网格经理被绑定的虚拟网格号码 |

##### 	**返回参数**

| 参数 | 参数名称 | 参数类型 | 是否必传 |  备注  |
| :--: | :------: | :------: | :------: | :----: |
| flag | 成功标志 |  String  |  String  | 01成功 |
| msg  | 失败原因 |  String  |    -     |        |





#### 5.工单列表

 **服务端：网格化平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|    参数    | 参数名称 | 参数类型 | 是否必传 |           备注           |
| :--------: | :------: | :------: | :------: | :----------------------: |
|   userNo   |   工号   |  String  |   true   |                          |
| orderState | 工单状态 |  String  |   true   | 01待办，02已签收，03已办 |
| beginDate  | 开始时间 |  String  |   true   |         默认两天         |
| finishDate | 结束时间 |  String  |   true   |         默认两天         |
|   pageNo   |   页号   |   int    |   true   |                          |
|  pageSize  |  页大小  |   int    |   true   |                          |

##### 	**返回参数**

|     参数      |   参数名称   | 参数类型 | 是否必传 |        备注         |
| :-----------: | :----------: | :------: | :------: | :-----------------: |
|     orgNo     |   供电单位   |  String  |   true   |                     |
|     appNo     |   申请编号   |  String  |   true   |                     |
|     appId     | 申请信息标识 |  String  |   true   |                     |
|    proName    |   流程名称   |  String  |   true   |                     |
|   activity    |   环节名称   |  String  |   true   |                     |
|    activNo    |   环节编号   |  String  |   true   |                     |
|   readMark    |   签收状态   |  String  |   true   |  01未签收02已签收   |
|  createTime   |   受理时间   |  String  |   true   | YYYY-MM-DD HH:MM:SS |
| acceptContent |   受理内容   |  String  |   true   |                     |
|    busType    |   业务类型   |  String  |   true   |      展示名称       |
|               |              |          |          |                     |





#### 6.工单签收/撤销

 **服务端：网格化平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|  参数   |   参数名称   | 参数类型 | 是否必传 |       备注        |
| :-----: | :----------: | :------: | :------: | :---------------: |
| userNo  |     工号     |  String  |   true   |                   |
| activNo |   环节编号   |  String  |   true   |                   |
|  appId  | 申请信息标识 |  String  |   true   |                   |
|  appNo  |   申请编号   |  String  |   true   |                   |
|  sign   |   签收状态   |  String  |   true   | 01签收 02撤销签收 |
|         |              |          |          |                   |

##### 	**返回参数**

|   参数   |   参数名称    | 参数类型 | 是否必传 |             备注              |
| :------: | :-----------: | :------: | :------: | :---------------------------: |
| signFlag | 签收/撤销标志 |  String  |   true   | 01操作成功 , 02失败，03已签收 |
|   msg    | 签撤失败原因  |  String  |  false   |                               |





#### 7.查询通话记录列表 

 **服务端：网格化平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|    参数    | 参数名称 | 参数类型 |     是否必传      | 备注 |
| :--------: | :------: | :------: | :---------------: | :--: |
|   userNo   |   工号   |  String  |       true        |      |
| recordType | 通话类型 |  String  | 01全部 ， 02 未接 |      |
|   pageNo   |   页号   |   int    |       true        |      |
|  pageSize  |  页大小  |   int    |       true        |      |

##### 	**返回参数**

|      参数      |     参数名称     | 参数类型 | 是否必传 |        备注         |
| :------------: | :--------------: | :------: | :------: | :-----------------: |
|   callNumber   |     通话号码     |  String  |   true   |                     |
|   direction    |   呼出呼出方向   |  String  |   true   |    1 呼入 2呼出     |
|   answerflag   |     应答标志     |  String  |   true   |   1接听，2未接通    |
|     appNo      |     申请编号     |  String  |    -     |      工单编号       |
|    callTime    |     来电时间     |  String  |    -     | YYYY-MM-DD HH:MI:SS |
|     isFlag     |    是否已制单    |  String  |   true   | 01已制单，02待制单  |
| mobileLocation |      归属地      |  String  |    -     |                     |
|     callId     |     通话标识     |  String  |   true   |                     |
|  streamnumber  | 通话记录唯一标识 |  String  |   true   |        主键         |
|                |                  |          |          |                     |





#### 8.查询通话详情

 **服务端：网格化平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|     参数     |     参数名称     | 参数类型 | 是否必传 | 备注 |
| :----------: | :--------------: | :------: | :------: | :--: |
|    userNo    |       工号       |  String  |   true   |      |
| streamnumber | 通话记录唯一标识 |  String  |   true   | 主键 |
|    appNo     |     申请编号     |  String  |    -     |      |
|              |                  |          |          |      |

##### 	**返回参数**

|        参数         |      参数名称      |     参数类型     | 是否必传 |             备注              |
| :-----------------: | :----------------: | :--------------: | :------: | :---------------------------: |
|     callNumber      |      通话号码      |      String      |   true   |                               |
|     answerflag      |      应答标志      |      String      |   true   |        1接听，2未接通         |
|  callTransferFlag   |    通话转移标志    |      String      |    -     |     是否被转移到地市坐席      |
|    callTransfer     | 通话转移到那个坐席 |      String      |    -     |     展示被转移的坐席名称      |
|      direction      |    呼出呼出方向    |      String      |   true   |         1 呼入 2呼出          |
|    transferTraj     |      接听轨迹      |      String      |          |       展示通过转接轨迹        |
|      callTime       |      来电时间      |      String      |   true   |      YYYY-MM-DD HH:MI:SS      |
|   mobileLocation    |       归属地       |      String      |    -     |                               |
|       callId        |      通话标识      |      String      |   true   |                               |
|    streamnumber     |  通话记录唯一标识  |      String      |   true   |             主键              |
|      duration       |      通话时长      |      String      |    -     |            单位 秒            |
|        appNo        |      申请编号      |      String      |    -     |           工单编号            |
|     recordPath      |      录音地址      |      String      |    -     |                               |
|       busType       |      业务类型      |      String      |          |                               |
|    acceptContent    |      受理内容      |      String      |          |                               |
|    isOrderFinish    |    工单办结标志    |      String      |          |       01在途，02已归档        |
|      consName       |      用户名称      |      String      |          |                               |
|       consNo        |        户号        |      String      |          |                               |
|     contactAddr     |      联系地址      |      String      |          |                               |
|    contactNumber    |       联系人       |      String      |          |                               |
| **callHistoryList** |  **通话历史列表**  |    **Array**     |          |                               |
|     answerflag      |      应答标志      |      String      |   true   |        1接听，2未接通         |
|      direction      |    呼出呼出方向    |      String      |   true   |         1 呼入 2呼出          |
|      callTime       |      来电时间      |      String      |   true   |      YYYY-MM-DD HH:MI:SS      |
|      duration       |      通话时长      |                  |          |            单位 秒            |
|     **tagList**     |    **标签列表**    | **Array/String** |          | **["标签1","标签2","标签3**"] |





#### 8.查询业务受理工单信息（暂存 需要和王康沟通）未完成

 **服务端：网格化平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|  参数  | 参数名称 | 参数类型 | 是否必传 | 备注 |
| :----: | :------: | :------: | :------: | :--: |
| userNo |   工号   |  String  |   true   |      |
| appNo  | 申请编号 |  String  |    -     |      |
|        |          |          |          |      |

##### 	**返回参数**

|        参数         |      参数名称      | 参数类型  | 是否必传 |                       备注                       |
| :-----------------: | :----------------: | :-------: | :------: | :----------------------------------------------: |
|        appNo        |      申请编号      |  String   |   true   |                                                  |
|     callNumber      |      通话号码      |  String   |   true   |                                                  |
|     createTime      |      创建时间      |  String   |   true   |                     制单时间                     |
|     updateTime      |      更新时间      |  String   |   true   |                                                  |
|      woStatus       |      工单状态      |           |    -     |                  1.保存:2.提交                   |
|       callId        |    通话唯一标识    |           |   true   |                                                  |
|       accTime       |                    |           |    -     |                                                  |
|    agentLandline    |     坐席落地号     |           |    -     |                                                  |
|     stepStatus      |      步骤状态      |    int    |    -     |           1.派工:2.处理:3.回单:4.回访            |
|     signStatus      |      签收状态      |    int    |    -     |                1.未签收:2.已签收                 |
|        empNo        |                    |  String   |    -     |                                                  |
|    **客户信息**     |         -          |     -     |    -     |             无封装，只是在文档里区分             |
|    customerName     |      客户名称      |  String   |    -     |                                                  |
|     customerId      |      用户编号      |  String   |    -     |                                                  |
|    contactPerson    |       联系人       |  String   |    -     |                                                  |
|    contactNumber    |      联系电话      |  String   |    -     |                                                  |
| electricityAddress  |      用电地址      |  String   |    -     |                                                  |
|   contactAddress    |      联系地址      |  String   |    -     |                                                  |
|    **通话信息**     |         -          |     -     |    -     |             无封装，只是在文档里区分             |
|      callTime       |      来电时间      |  String   |   true   |               YYYY-MM-DD HH:MI:SS                |
|      duration       |      通话时长      |  String   |    -     |                     单位 秒                      |
|     recordPath      |      录音地址      |  String   |    -     |                                                  |
|    **工单信息**     |         -          |     -     |    -     |             无封装，只是在文档里区分             |
|     createUser      |    受理人员工号    |  String   |   true   |                  制单人,受理人                   |
|   createUserName    |      受理人员      |  String   |   true   |                  制单人,受理人                   |
|    urbanOrRural     |      城乡分类      |  String   |   true   |                                                  |
|   powerSupplyUnit   |      供电单位      |  String   |   true   |                                                  |
| powerSupplyUnitName |    供电单位名称    |  String   |   true   |                                                  |
|       region        |      所属地市      |  String   |   true   |                                                  |
|     accContent      |      受理内容      |  String   |   true   |                                                  |
|     accOpinions     |      受理意见      |  String   |    -     |                                                  |
|       remarks       |        备注        |  String   |    -     |                                                  |
|     exeAttrCode     |    特殊工单标记    |  String   |    -     |                    11：煤改电                    |
|        subWo        |      关联工单      |  String   |    -     |                                                  |
|    **fileList**     |    **附件列表**    | **Array** |  **-**   |                                                  |
|      filePath       |      附件地址      |  String   |    -     |                                                  |
|      fileName       |      附件名称      |  String   |    -     |                                                  |
|       fileId        |      附件标识      |  String   |    -     |                                                  |
|    **业务类型**     |       **-**        |   **-**   |  **-**   |           **无封装，只是在文档里区分**           |
|       woType        |      工单类型      |  String   |          |     1.咨询:2.投诉:3.举报:4.意见(建议):5.故障     |
|    busiTypeCode     |      工单类型      |  String   |   true   | (1:查询咨询 2:故障报修 3:业务申请 4:紧急服务类） |
|    woSubtypeOne     |      子类型1       |  String   |   true   |                                                  |
|    woSubtypeTwo     |      子类型2       |  String   |   true   |                                                  |
|   woSubtypeThree    |      子类型3       |  String   |    -     |                                                  |
|       dispOrg       |      派发单位      |  String   |    -     |                                                  |
|    faultSymptoms    |      故障现象      |  String   |    -     |                     故障报修                     |
|      faultType      |      故障分类      |  String   |    -     |                     故障报修                     |
|     hazardLevel     |    故障危害等级    |  String   |    -     |                     故障报修                     |
|       levelNo       |     程度/等级      |  String   |    -     |                     故障报修                     |
|    faultAddress     |      故障地址      |  String   |    -     |                     故障报修                     |
|  objectOfReference  |     地址参照物     |  String   |    -     |                     故障报修                     |
|   confidentiality   |      是否保密      |  String   |    -     |                     故障报修                     |
|      anonymous      |      是否匿名      |  String   |    -     |                     故障报修                     |
|      relaAppNo      |  故障报修合并工单  |  String   |    -     |                     故障报修                     |
|     urgeContent     |      催办内容      |  String   |    -     |                       催办                       |
|      urgeCause      |      催办原因      |  String   |    -     |                       催办                       |
|       urgeOrg       |      催办单位      |  String   |    -     |                       催办                       |
|      urgeAppNo      |      催办编号      |  String   |    -     |                       催办                       |
|   appBusiTypeCode   | 被催办督办工单类型 |  String   |    -     |                       催办                       |
|      trainFlag      |   是否直通车业务   |  String   |    -     |                       催办                       |
|                     |                    |           |          |                                                  |
|                     |                    |           |          |                                                  |





#### 9.保存/提交-业务受理工单信息（未完成）

保存 or 提交 业务受理工单工单信息。 详见公共接口



#### 11.查询供电单位列表（未完成）

优先级：高

 **服务端：网格化平台**

前端需按照业务场景自行进行处理，例如父类是否可选等。  详见公共接口



#### 12.查询受理内容模版列表 - 已完成

 **服务端：网格化平台**

**接口地址：/api/acceptTemplate/selectAllAcceptTemplate**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|    **参数**     | **参数名称** | **参数类型** | **是否必传** |            **备注**             |
| :-------------: | :----------: | :----------: | :----------: | :-----------------------------: |
|     userNo      |     工号     |    String    |     true     |                                 |
|  businessType   |   业务类型   |    String    |      -       |                                 |
| templateContent |   模版内容   |    String    |      -       |                                 |
|  templateType   |   模版类型   |    String    |     true     | 1 受理内容模板 ，2 受理意见模板 |
|     pageNum     |     页码     |     int      |     true     |                                 |
|    pageSize     |  每页多少条  |     int      |     true     |                                 |

##### 	**返回参数**

|    **参数**     | **参数名称** | **参数类型** | **是否必传** | **备注** |
| :-------------: | :----------: | :----------: | :----------: | :------: |
|  templateName   |   模版名称   |    String    |     true     |          |
|  businessType   |   业务类型   |    String    |     true     |          |
| templateContent |   模版内容   |    String    |     true     |          |
|  templateType   |   模版类型   |    String    |     true     |          |

入参示例

```json
{
    "pageNum": 1,
    "pageSize": 10,
    "businessType": "003",
    "templateType": "1",
    "acceptTemplateName": "模版名称",
    "templateContent": "模版内容"
}
```

出参示例

```
{
    "status": 200,
    "msg": "",
    "data": [
        {
            "businessType": "故障报修",
            "templateName": "【报修紧急消缺】【变压器问题紧急消缺】",
            "templateContent": "【报修紧急消缺】【变压器问题紧急消缺】客户报修此处变压器异响/冒火/漏油/爆炸，请处理。（注：如客户能够提供变压器编号，请在备注注明。）",
            "templateType": "受理内容模板"
        }
    ],
    "total": 371,
    "requestId": "d1c8e0b9-563b-4b9e-b5c4-cfb275ae7e75",
    "timestamp": 1762509877084
}
```





#### 13.查询热词模版列表 - 已完成

 **服务端：网格化平台**

**接口地址：/api/hotWord/selectAll **

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

| **参数** | **参数名称** | **参数类型** | **是否必传** |               **备注**               |
| :------: | :----------: | :----------: | :----------: | :----------------------------------: |
|  userNo  |     工号     |    String    |     true     |                                      |
|   type   |   热词类型   |    String    |      -       | 1中央及公司重点工作类 ， 2风险预警类 |
|   name   |   热词名称   |    String    |      -       |                                      |
| pageNum  |     页码     |     int      |     true     |                                      |
| pageSize |  每页多少条  |     int      |     true     |                                      |

##### 	**返回参数**

| **参数** | **参数名称** | **参数类型** | **是否必传** | **备注** |
| :------: | :----------: | :----------: | :----------: | :------: |
|   name   |   热词名称   |    String    |     true     |          |
|   type   |   热词类型   |    String    |     true     |          |
| busiType |   热词内容   |    String    |     true     |          |
|   tag    |   标记要求   |    String    |     true     |          |
|  status  |   是否启用   |    String    |     true     | 启用标准 |

入参示例

```json
{
    "pageNum": 1,
    "pageSize": 10,
    "type": "2",
    "name": "热词名称"
}
```

出参示例

```json
{
    "status": 200,
    "msg": "",
    "data": [
        {
            "id": "60007096757428607115265",
            "name": "【电力短信】",
            "type": "风险预警类",
            "busiType": "客户来电反映，因手机号码变更，现在户号为×的短信订阅接受手机号由×变更为×/取消户号为×、接受手机号为×的电费/停电信息短信订阅，请相关工作人员核实处理。",
            "tag": "常态标记",
            "createUser": "邓晓薇",
            "updateUser": "邓晓薇",
            "createTime": "2023-08-14 15:40:22",
            "updateTime": "2023-08-26 15:46:03",
            "status": "未启用"
        }
    ],
    "total": 28,
    "requestId": "c8287cc3-dd7d-4497-b313-d2bea8810ad6",
    "timestamp": 1762513997387
}
```





#### 14.查询关联工单列表 - 已完成

业务受理

 **服务端：网格化平台**

**接口地址：/api/workOrder/relationList**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|    **参数**     | **参数名称** | **参数类型** | **是否必传** |     **备注**     |
| :-------------: | :----------: | :----------: | :----------: | :--------------: |
|     userNo      |     工号     |    String    |     true     |                  |
|  contactNumber  |   联系电话   |    String    |      -       | 默认联系电话查询 |
|      woNo       |   申请编号   |    String    |      -       |                  |
|     woType      |   业务类型   |    String    |      -       |                  |
| acceptStartTime | 受理开始时间 |    String    |      -       |                  |
|  acceptEndTime  | 受理结束时间 |    String    |      -       |                  |
|  acceptContent  |   受理内容   |    String    |      -       |                  |
| contactAddress  |   联系地址   |    String    |      -       |                  |
|     pageNum     |     页码     |     int      |     true     |                  |
|    pageSize     |  每页多少条  |     int      |     true     |                  |

##### 	**返回参数**

|    **参数**    | **参数名称** | **参数类型** | **是否必传** |      **备注**       |
| :------------: | :----------: | :----------: | :----------: | :-----------------: |
|      woNo      |   申请编号   |    String    |     true     |                     |
|     woType     |   业务类型   |    String    |     true     |                     |
|   createTime   |   受理时间   |    String    |     true     | YYYY-MM-DD HH:MI:SS |
|  customerName  |    联系人    |    String    |      -       |                     |
| contactNumber  |   联系电话   |    String    |     true     |                     |
| contactAddress |   联系地址   |    String    |      -       |                     |
| acceptContent  |   受理内容   |    String    |     true     |                     |

入参示例

```json
{"pageNum":1,"pageSize":10,"woNo":"申请编号","woType":"003","acceptStartTime":"2025-11-07 18:07:42","acceptEndTime":"2025-11-07 18:07:43","customerId":"客户编号","customerName":"客户名称","contactNumber":"联系电话","contactAddress":"联系地址","acceptContent":"受理内容"}
```

出参示例

```json
{
    "status": 200,
    "msg": "",
    "data": [
        {
            "woNo": "2305xxxxxx8",
            "woType": "查询咨询-异常来电",
            "handleTime": null,
            "empName": null,
            "acceptContent": "【客户回拨电话】客户之前拨打电话反映所在区域多户停电，自行查找原因后合闸恢复供电。",
            "accOpinions": null,
            "exeAttrCode": null,
            "woSubtypeOne": "异常来电",
            "woSubtypeTwo": "诉求撤销",
            "woSubtypeThree": null,
            "activityName": null,
            "woStatus": null,
            "powerSupplyUnit01": null,
            "powerSupplyUnit02": null,
            "urbanRuralFlag": null,
            "powerSupplyUnit03": null,
            "handleDeptName": null,
            "customerId": null,
            "contactPerson": null,
            "contactNumber": "181xxxxxxx",
            "elecAddr": null,
            "gdTime": null,
            "powerSupplyUnit04": null,
            "connectApp": null,
            "handleDept": null,
            "handleEmpNo": null,
            "handleEmpName": null,
            "handleDate": null,
            "handleStatusMode": null,
            "powerSupplyUnit05": null,
            "countryCodeName": null,
            "psName": null,
            "trueFlag": null,
            "corporResponFlag": null,
            "finalVisitResult": null,
            "handleStatis": null,
            "throughTrainFlag": null,
            "community": null,
            "agentLandline": null,
            "satisfy": null,
            "callId": null,
            "processName": null,
            "procOrgan": null,
            "procOrganName": null,
            "handleTimex": null,
            "contactTime": null,
            "masterAppNo": null,
            "powerSupplyUnit": "6440401",
            "powerSupplyUnitName": null,
            "customerName": "孟女士",
            "createTime": null,
            "timeLimit": null,
            "recoDate": null,
            "recoPowerTime": null,
            "arrivalTime": null,
            "complateTime": null,
            "orgNo": null,
            "busiTypCode": null,
            "repeatAppType": null,
            "isReturnOrder": null,
            "queryBeginTime": null,
            "queryEndTime": null
        }
    ],
    "total": 975643,
    "requestId": "b47d8d46-cfb9-415a-8e4b-455e3bdfa9cc",
    "timestamp": 1762510125595
}
```



#### 15.查询合并工单列表 -已完成

业务受理  - 故障报修

 **服务端：网格化平台**

**接口地址：/api/workOrder/relationList**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|    **参数**     | **参数名称** | **参数类型** | **是否必传** |     **备注**     |
| :-------------: | :----------: | :----------: | :----------: | :--------------: |
|     userNo      |     工号     |    String    |     true     |                  |
|  contactNumber  |   联系电话   |    String    |      -       | 默认联系电话查询 |
|      woNo       |   申请编号   |    String    |      -       |                  |
|     woType      |   业务类型   |    String    |      -       |                  |
| acceptStartTime | 受理开始时间 |    String    |      -       |                  |
|  acceptEndTime  | 受理结束时间 |    String    |      -       |                  |
|  customerName   |   客户名称   |    String    |      -       |                  |
| contactAddress  |   联系地址   |    String    |      -       |                  |
|  acceptContent  |   受理内容   |    String    |      -       |                  |
|     pageNum     |     页码     |     int      |     true     |                  |
|    pageSize     |  每页多少条  |     int      |     true     |                  |

##### 	**返回参数**

|    **参数**    | **参数名称** | **参数类型** | **是否必传** |      **备注**       |
| :------------: | :----------: | :----------: | :----------: | :-----------------: |
|      woNo      |   申请编号   |    String    |     true     |                     |
|     woType     |   业务类型   |    String    |     true     |                     |
|   createTime   |   受理时间   |    String    |     true     | YYYY-MM-DD HH:MI:SS |
| contactNumber  |   联系电话   |    String    |     true     |                     |
| acceptContent  |   受理内容   |    String    |     true     |                     |
| contactAddress |   联系地址   |    String    |      -       |                     |
|  customerName  |    联系人    |    String    |      -       |                     |

入参示例

```json
{
    "pageNum": 1,
    "pageSize": 10,
    "woNo": "申请编号",
    "woType": "001",
    "acceptStartTime": "2025-11-07 18:12:37",
    "acceptEndTime": "2025-11-07 18:12:38",
    "customerId": "客户编号",
    "customerName": "客户名称",
    "contactNumber": "联系电话",
    "contactAddress": "联系地址",
    "acceptContent": "受理内容"
}
```

出参示例

```json
{
    "status": 200,
    "msg": "",
    "data": [
        {
            "woNo": "2511078046xxxxxx7",
            "woType": "故障报修-非电力故障",
            "handleTime": null,
            "empName": null,
            "acceptContent": "【一户无电】低压居民报修一户无电，经指导客户检查，无法判断设备故障及其资产，请尽快核实处理。",
            "accOpinions": null,
            "exeAttrCode": null,
            "woSubtypeOne": "非电力故障",
            "woSubtypeTwo": "客户内部故障",
            "woSubtypeThree": "居民客户内部故障",
            "activityName": null,
            "woStatus": null,
            "powerSupplyUnit01": null,
            "powerSupplyUnit02": null,
            "urbanRuralFlag": null,
            "powerSupplyUnit03": null,
            "handleDeptName": null,
            "customerId": "xxxxxxx",
            "contactPerson": "杨志保",
            "contactNumber": "xxxxxxx",
            "elecAddr": null,
            "gdTime": null,
            "powerSupplyUnit04": null,
            "connectApp": null,
            "handleDept": null,
            "handleEmpNo": null,
            "handleEmpName": null,
            "handleDate": null,
            "handleStatusMode": null,
            "powerSupplyUnit05": null,
            "countryCodeName": null,
            "psName": null,
            "trueFlag": null,
            "corporResponFlag": null,
            "finalVisitResult": null,
            "handleStatis": null,
            "throughTrainFlag": null,
            "community": null,
            "agentLandline": null,
            "satisfy": null,
            "callId": null,
            "processName": null,
            "procOrgan": null,
            "procOrganName": null,
            "handleTimex": null,
            "contactTime": null,
            "masterAppNo": null,
            "powerSupplyUnit": "644050309",
            "powerSupplyUnitName": null,
            "customerName": "杨志保",
            "createTime": "2025-11-07 18:13:15",
            "timeLimit": null,
            "recoDate": null,
            "recoPowerTime": null,
            "arrivalTime": null,
            "complateTime": null,
            "orgNo": null,
            "busiTypCode": null,
            "repeatAppType": null,
            "isReturnOrder": null,
            "queryBeginTime": null,
            "queryEndTime": null
        }
    ],
    "total": 365754,
    "requestId": "f9910f25-d50f-46a8-b522-0319927d3c17",
    "timestamp": 1762510408703
}
```



#### 16.查询催办工单列表（未完成）

业务受理  - 故障报修

 **服务端：网格化平台**

**接口地址：/api/urge/workOrder **

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|    **参数**     | **参数名称** | **参数类型** | **是否必传** |      **备注**      |
| :-------------: | :----------: | :----------: | :----------: | :----------------: |
|     userNo      |     工号     |    String    |     true     |                    |
|  contactNumber  |   联系电话   |    String    |      -       |  默认联系电话查询  |
|      woNo       |   申请编号   |    String    |      -       | 被催办督办工单编号 |
|     woType      |   业务类型   |    String    |      -       |                    |
| acceptStartTime | 受理开始时间 |    String    |      -       |                    |
|  acceptEndTime  | 受理结束时间 |    String    |      -       |                    |
|   powerSupply   |   供电单位   |    String    |      -       |                    |
|   stepStatus    |     环节     |    String    |      -       |                    |
|     pageNum     |     页码     |     int      |     true     |                    |
|    pageSize     |  每页多少条  |     int      |     true     |                    |

##### 	**返回参数**

|      **参数**       | **参数名称** | **参数类型** | **是否必传** |      **备注**       |
| :-----------------: | :----------: | :----------: | :----------: | :-----------------: |
|        woNo         |   申请编号   |    String    |     true     |                     |
|     processName     |   业务类型   |    String    |     true     |                     |
| powerSupplyUnitName |   供电单位   |    String    |     true     |                     |
|    procOrganName    | 当前处理单位 |    String    |     true     |                     |
|     createTime      |   受理时间   |    String    |     true     | YYYY-MM-DD HH:MI:SS |
|    contactNumber    |   联系电话   |    String    |     true     |                     |
|     customerId      |   用户标识   |              |              |      用户编号       |
|    acceptContent    |   受理内容   |    String    |     true     |                     |
|      elecAddr       |   联系地址   |    String    |     true     |                     |
|    customerName     |    联系人    |    String    |     true     |                     |
|    activityName     | 当前环节名称 |    String    |     true     |                     |
|      woStatus       |    ？？？    |              |              |                     |

 [!CAUTION]

 woStatus

入参示例

```json
{
    "pageNum": 1,
    "pageSize": 10,
    "powerSupply": "银川供电公司",
    "contactNumber": "联系电话",
    "woType": "003",
    "acceptStartTime": "2025-11-07 19:17:06",
    "acceptEndTime": "2025-11-07 19:17:07",
    "woNo": "被催办督办工单编号",
    "stepStatus": "业务受理",
    "powerSupplyUnit": "64401"
}
```



出参示例

```json
{
    "status": 200,
    "msg": "ok",
    "data": [
        {
            "woNo": "25110748xxx048202",
            "woType": "业务申请",
            "handleTime": null,
            "empName": null,
            "acceptContent": null,
            "accOpinions": null,
            "exeAttrCode": null,
            "woSubtypeOne": "用电异常核实",
            "woSubtypeTwo": "交费差错更正",
            "woSubtypeThree": null,
            "activityName": "业务处理",
            "woStatus": "2",
            "powerSupplyUnit01": null,
            "powerSupplyUnit02": null,
            "urbanRuralFlag": "01",
            "powerSupplyUnit03": null,
            "handleDeptName": null,
            "customerId": "6410xxxx191",
            "contactPerson": "先生",
            "contactNumber": "1899xxxx6750",
            "elecAddr": "银川市金凤区长城路南侧雅兰苑6-1-302",
            "gdTime": null,
            "powerSupplyUnit04": null,
            "connectApp": null,
            "handleDept": null,
            "handleEmpNo": null,
            "handleEmpName": null,
            "handleDate": null,
            "handleStatusMode": null,
            "powerSupplyUnit05": null,
            "countryCodeName": null,
            "psName": null,
            "trueFlag": null,
            "corporResponFlag": null,
            "finalVisitResult": null,
            "handleStatis": null,
            "throughTrainFlag": null,
            "community": null,
            "agentLandline": null,
            "satisfy": null,
            "callId": null,
            "processName": "(网格) 业务申请",
            "procOrgan": "64401",
            "procOrganName": "银川供电公司",
            "handleTimex": null,
            "contactTime": null,
            "masterAppNo": null,
            "powerSupplyUnit": "6440101",
            "powerSupplyUnitName": "金凤区供电公司",
            "customerName": "先生",
            "createTime": "2025-11-07 19:14:04",
            "timeLimit": null,
            "recoDate": null,
            "recoPowerTime": null,
            "arrivalTime": null,
            "complateTime": null,
            "orgNo": null,
            "busiTypCode": null,
            "repeatAppType": null,
            "isReturnOrder": null,
            "queryBeginTime": null,
            "queryEndTime": null
        }
    ],
    "total": 280,
    "requestId": "dc3bd1ca-5629-44ed-8114-2d3b5eb5d999",
    "timestamp": 1762514289127
}
```



#### 17.查询客户列表（未完成）

 **服务端：网格化平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|      参数      |  参数名称  | 参数类型 | 是否必传 |            备注            |
| :------------: | :--------: | :------: | :------: | :------------------------: |
|     userNo     |    工号    |  String  |   true   |                            |
| contractNumber |  联系方式  |  String  |    -     | 联系方式与户号不能同时为空 |
|     consNo     |  用户编号  |  String  |    -     | 联系方式与户号不能同时为空 |
|    pageNum     |    页码    |   int    |   true   |                            |
|    pageSize    | 每页多少条 |   int    |   true   |                            |
|                |            |          |          |                            |

##### 	**返回参数**

|      参数       |   参数名称   | 参数类型 | 是否必传 | 备注 |
| :-------------: | :----------: | :------: | :------: | :--: |
|     consNo      |   用户编号   |  String  |   true   |      |
|    consName     |   用户名称   |  String  |   true   |      |
|    consState    |   用户状态   |  String  |   true   |      |
|     ecCateg     | 用电类型编码 |  String  |   true   |      |
|   ecCategName   | 用电类型名称 |  String  |   true   |      |
|     voltLv      |   电压等级   |  String  |   true   |      |
|   voltLvName    | 电压等级名称 |  String  |   true   |      |
| powerSupplyUnit | 供电单位编码 |  String  |   true   |      |
|     orgName     | 供电单位名称 |  String  |   true   |      |
| powerSupplyName |   用电地址   |  String  |   true   |      |
| urbanRuralFlag  |   城乡编码   |  String  |   true   |      |
| urbanRuralName  | 城乡编码名称 |  String  |   true   |      |
|    cityCode     | 所属城市编码 |  String  |   true   |      |
|    cityName     |   所属城市   |  String  |   true   |      |
|   exeAttrCode   | 用户扩展属性 |  String  |    -     |      |
|     indCls      |   行业分类   |  String  |    -     |      |
|   indClsName    | 行业分类名称 |  String  |    -     |      |
|     eccStat     |   用户状态   |  String  |    -     |      |









#### 18.查询网格历史工单列表（未完成）

 **服务端：网格化平台**

**接口地址：/api/businessQuery/workOrder**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|      参数       |  参数名称  | 参数类型 | 是否必传 |             备注              |
| :-------------: | :--------: | :------: | :------: | :---------------------------: |
|     userNo      |    工号    |  String  |   true   |                               |
|  contactNumber  |  联系方式  |  String  |   true   |                               |
| acceptStartTime |  开始时间  |  String  |   true   | 新增字段，YYYY-MM-DD HH:MM:SS |
|  acceptEndTime  |  结束时间  |  String  |   true   | 新增字段，YYYY-MM-DD HH:MM:SS |
|     pageNum     |    页码    |   int    |   true   |                               |
|    pageSize     | 每页多少条 |   int    |   true   |                               |

##### 	**返回参数**

|      参数      |   参数名称   | 参数类型 | 是否必传 |               备注               |
| :------------: | :----------: | :------: | :------: | :------------------------------: |
|      woNo      |   申请编号   |  String  |   true   |                                  |
|   handleTime   |   受理时间   |  String  |   true   |       YYYY-MM-DD HH:MI:SS        |
|     woType     |   业务类型   |  String  |   true   |             一级分类             |
| handleDeptName |   供电单位   |  String  |   true   |                                  |
|    woStatus    |   工单状态   |  String  |   true   | 1.保存；2.提交；3.一次性办结工单 |
| acceptContent  |   受理内容   |  String  |   true   |                                  |
|     ？？？     |   工单状态   |  String  |   true   |                                  |
|     ？？？     | 当前工单环节 |  String  |   true   |             新增字段             |
|     ？？？     |   办结时间   |  String  |   true   |             新增字段             |





#### 19.查询故障报修工单（未完成）

需查询 95598故障报修 +  网格化故障报修工单 ， 合并返回

 **服务端：网格化平台**

**接口地址：/api/businessQuery/workOrder95598**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|     参数      |  参数名称  | 参数类型 |          是否必传          |         备注         |
| :-----------: | :--------: | :------: | :------------------------: | :------------------: |
|    userNo     |    工号    |  String  |            true            |                      |
| contactNumber |  联系方式  |  String  | 联系方式与户号不能同时为空 | 移动端用联系方式查询 |
|    consNo     |  用户编号  |  String  | 联系方式与户号不能同时为空 |                      |
|    pageNum    |    页码    |   int    |            true            |                      |
|   pageSize    | 每页多少条 |   int    |            true            |                      |

##### 	**返回参数**

|       参数       |   参数名称   | 参数类型 | 是否必传 |          备注           |
| :--------------: | :----------: | :------: | :------: | :---------------------: |
|      appNo       |   申请编号   |  String  |   true   |                         |
|     cscAppNo     | 国网申请编号 |  String  |   true   |                         |
|     acptTime     |   受理时间   |  String  |   true   |                         |
|  busSubTypeName  |   业务类型   |  String  |   true   |                         |
| faultUrgnDegName |   紧急程度   |  String  |    -     |                         |
|     orgName      | 供电单位名称 |  String  |   true   |                         |
|     deptName     |   处理单位   |  String  |    -     |         抢修队          |
|     curStep      |   当前步骤   |  String  |          |                         |
|      consNo      |   用户编号   |  String  |    -     |                         |
|  secSubTypeName  |   故障原因   |  String  |    -     |     faultRepairType     |
|     acptCont     |   受理内容   |  String  |    -     |                         |
|    faultAddr     |   故障地址   |  String  |    -     |                         |
|    repairTime    | 故障修复时间 |  String  |    -     |                         |
| frstAidHandleRec | 现场抢修记录 |  String  |    -     |                         |
|                  |   工单状态   |  String  |    -     |                         |
|                  |   来源标识   |  String  |    -     | 01网格  ， 02 95598来源 |







#### 20.查询营销业扩办电工单（未完成）

 **服务端：网格化平台**

**接口地址：/api/businessQuery/workOrderYk **

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|    参数    |  参数名称  | 参数类型 | 是否必传 | 备注 |
| :--------: | :--------: | :------: | :------: | :--: |
|   userNo   |    工号    |  String  |   true   |      |
| customerId |  用户编号  |  String  |   true   |      |
|  pageNum   |    页码    |   int    |   true   |      |
|  pageSize  | 每页多少条 |   int    |   true   |      |

##### 	**返回参数**

|       参数       |   参数名称   | 参数类型 | 是否必传 |                     备注                     |
| :--------------: | :----------: | :------: | :------: | :------------------------------------------: |
|      appNo       |   申请编号   |  String  |   true   |                                              |
|      consNo      |   客户编号   |  String  |    -     |                                              |
|     consName     |   客户名称   |  String  |    -     |                                              |
|     elecAddr     |   用电地址   |  String  |    -     |                                              |
|   businessType   |   业务类型   |  String  |    -     |                                              |
| businessTypeName | 业务类型名称 |  String  |    -     |                                              |
|      orgNo       |   供电单位   |  String  |   true   |                                              |
|     procName     |   流程名称   |  String  |   true   |                                              |
|     stepName     |   环节名称   |  String  |    -     |                                              |
|    orderStat     |   工单状态   |  String  |          |                                              |
|    createTime    |   受理时间   |  String  |   true   |                                              |
|     bigTime      | 环节开始时间 |  String  |    -     |                                              |
|     acmpTime     | 环节完成时间 |  String  |    -     | 当工单结束后(归档、关闭、作废)，就是完成时间 |
|    handleName    |   处理人员   |  String  |    -     |                                              |
|     acptStf      |   受理人员   |  String  |    -     |                                              |







#### xxxx.保存业务受理工单信息（未完成）

 **服务端：网格化平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|        参数        |   参数名称   | 参数类型 | 是否必传 | 备注 |
| :----------------: | :----------: | :------: | :------: | :--: |
|       userNo       |     工号     |  String  |   true   |      |
|    urbanOrRural    |   城乡类别   |          |          |      |
|    customerName    |   客户名称   |          |          |      |
|    powerSupply     |   供电单位   |          |          |      |
|       region       |   所属城市   |          |          |      |
|   contactPerson    |    联系人    |          |          |      |
|   contactNumber    |   联系电话   |          |          |      |
| electricityAddress |   用电地址   |          |          |      |
|   contactAddress   |   联系地址   |          |          |      |
|     accContent     |   受理内容   |          |          |      |
|      remarks       |   受理意见   |          |          |      |
|    exeAttrCode     | 特殊工单标记 |          |          |  11  |
|                    |              |          |          |      |
|                    |              |          |          |      |
|                    |              |          |          |      |
|                    |              |          |          |      |
|                    |              |          |          |      |
|                    |              |          |          |      |
|                    |              |          |          |      |
|                    |              |          |          |      |
|                    |              |          |          |      |
|                    |              |          |          |      |
|                    |              |          |          |      |

##### 	**返回参数**

|     参数     |   参数名称   | 参数类型  | 是否必传 |              备注              |
| :----------: | :----------: | :-------: | :------: | :----------------------------: |
|    count     |     总数     |    int    |   true   | 返回的数据总条数，分页情况使用 |
| **consList** | **用户列表** | **Array** | **true** |                                |
|              |              |           |          |                                |







#### xxxx.保存业务受理工单信息（未完成）

 **服务端：网格化平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|  参数  | 参数名称 | 参数类型 | 是否必传 | 备注 |
| :----: | :------: | :------: | :------: | :--: |
| userNo |   工号   |  String  |   true   |      |
|        |          |          |          |      |
|        |          |          |          |      |

##### 	**返回参数**

|     参数     |   参数名称   | 参数类型  | 是否必传 |              备注              |
| :----------: | :----------: | :-------: | :------: | :----------------------------: |
|    count     |     总数     |    int    |   true   | 返回的数据总条数，分页情况使用 |
| **consList** | **用户列表** | **Array** | **true** |                                |
|              |              |           |          |                                |







#### xxxx.保存业务受理工单信息（未完成）

 **服务端：网格化平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|  参数  | 参数名称 | 参数类型 | 是否必传 | 备注 |
| :----: | :------: | :------: | :------: | :--: |
| userNo |   工号   |  String  |   true   |      |
|        |          |          |          |      |
|        |          |          |          |      |

##### 	**返回参数**

|     参数     |   参数名称   | 参数类型  | 是否必传 |              备注              |
| :----------: | :----------: | :-------: | :------: | :----------------------------: |
|    count     |     总数     |    int    |   true   | 返回的数据总条数，分页情况使用 |
| **consList** | **用户列表** | **Array** | **true** |                                |
|              |              |           |          |                                |







#### xxxx.保存业务受理工单信息（未完成）

 **服务端：网格化平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|  参数  | 参数名称 | 参数类型 | 是否必传 | 备注 |
| :----: | :------: | :------: | :------: | :--: |
| userNo |   工号   |  String  |   true   |      |
|        |          |          |          |      |
|        |          |          |          |      |

##### 	**返回参数**

|     参数     |   参数名称   | 参数类型  | 是否必传 |              备注              |
| :----------: | :----------: | :-------: | :------: | :----------------------------: |
|    count     |     总数     |    int    |   true   | 返回的数据总条数，分页情况使用 |
| **consList** | **用户列表** | **Array** | **true** |                                |
|              |              |           |          |                                |



#### xxxx.保存业务受理工单信息（未完成）

 **服务端：网格化平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|  参数  | 参数名称 | 参数类型 | 是否必传 | 备注 |
| :----: | :------: | :------: | :------: | :--: |
| userNo |   工号   |  String  |   true   |      |
|        |          |          |          |      |
|        |          |          |          |      |

##### 	**返回参数**

|     参数     |   参数名称   | 参数类型  | 是否必传 |              备注              |
| :----------: | :----------: | :-------: | :------: | :----------------------------: |
|    count     |     总数     |    int    |   true   | 返回的数据总条数，分页情况使用 |
| **consList** | **用户列表** | **Array** | **true** |                                |
|              |              |           |          |                                |







#### xxxx.保存业务受理工单信息（未完成）

 **服务端：网格化平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|  参数  | 参数名称 | 参数类型 | 是否必传 | 备注 |
| :----: | :------: | :------: | :------: | :--: |
| userNo |   工号   |  String  |   true   |      |
|        |          |          |          |      |
|        |          |          |          |      |

##### 	**返回参数**

|     参数     |   参数名称   | 参数类型  | 是否必传 |              备注              |
| :----------: | :----------: | :-------: | :------: | :----------------------------: |
|    count     |     总数     |    int    |   true   | 返回的数据总条数，分页情况使用 |
| **consList** | **用户列表** | **Array** | **true** |                                |
|              |              |           |          |                                |





#### xxxx.保存业务受理工单信息（未完成）

 **服务端：网格化平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|  参数  | 参数名称 | 参数类型 | 是否必传 | 备注 |
| :----: | :------: | :------: | :------: | :--: |
| userNo |   工号   |  String  |   true   |      |
|        |          |          |          |      |
|        |          |          |          |      |

##### 	**返回参数**

|     参数     |   参数名称   | 参数类型  | 是否必传 |              备注              |
| :----------: | :----------: | :-------: | :------: | :----------------------------: |
|    count     |     总数     |    int    |   true   | 返回的数据总条数，分页情况使用 |
| **consList** | **用户列表** | **Array** | **true** |                                |
|              |              |           |          |                                |



#### xxxx.保存业务受理工单信息（未完成）

 **服务端：网格化平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|  参数  | 参数名称 | 参数类型 | 是否必传 | 备注 |
| :----: | :------: | :------: | :------: | :--: |
| userNo |   工号   |  String  |   true   |      |
|        |          |          |          |      |
|        |          |          |          |      |

##### 	**返回参数**

|     参数     |   参数名称   | 参数类型  | 是否必传 |              备注              |
| :----------: | :----------: | :-------: | :------: | :----------------------------: |
|    count     |     总数     |    int    |   true   | 返回的数据总条数，分页情况使用 |
| **consList** | **用户列表** | **Array** | **true** |                                |
|              |              |           |          |                                |



#### xxxx.保存业务受理工单信息（未完成）

 **服务端：网格化平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|  参数  | 参数名称 | 参数类型 | 是否必传 | 备注 |
| :----: | :------: | :------: | :------: | :--: |
| userNo |   工号   |  String  |   true   |      |
|        |          |          |          |      |
|        |          |          |          |      |

##### 	**返回参数**

|     参数     |   参数名称   | 参数类型  | 是否必传 |              备注              |
| :----------: | :----------: | :-------: | :------: | :----------------------------: |
|    count     |     总数     |    int    |   true   | 返回的数据总条数，分页情况使用 |
| **consList** | **用户列表** | **Array** | **true** |                                |
|              |              |           |          |                                |





#### xxxx.保存业务受理工单信息（未完成）

 **服务端：网格化平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|  参数  | 参数名称 | 参数类型 | 是否必传 | 备注 |
| :----: | :------: | :------: | :------: | :--: |
| userNo |   工号   |  String  |   true   |      |
|        |          |          |          |      |
|        |          |          |          |      |

##### 	**返回参数**

|     参数     |   参数名称   | 参数类型  | 是否必传 |              备注              |
| :----------: | :----------: | :-------: | :------: | :----------------------------: |
|    count     |     总数     |    int    |   true   | 返回的数据总条数，分页情况使用 |
| **consList** | **用户列表** | **Array** | **true** |                                |
|              |              |           |          |                                |





#### xxxx.保存业务受理工单信息（未完成）

 **服务端：网格化平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|  参数  | 参数名称 | 参数类型 | 是否必传 | 备注 |
| :----: | :------: | :------: | :------: | :--: |
| userNo |   工号   |  String  |   true   |      |
|        |          |          |          |      |
|        |          |          |          |      |

##### 	**返回参数**

|     参数     |   参数名称   | 参数类型  | 是否必传 |              备注              |
| :----------: | :----------: | :-------: | :------: | :----------------------------: |
|    count     |     总数     |    int    |   true   | 返回的数据总条数，分页情况使用 |
| **consList** | **用户列表** | **Array** | **true** |                                |
|              |              |           |          |                                |



#### xxxx.保存业务受理工单信息（未完成）

 **服务端：网格化平台**

**接口地址：/xxxxxxx**

**请求方式：POST**

**接口类型：RestFull**

##### 	**请求参数**

|  参数  | 参数名称 | 参数类型 | 是否必传 | 备注 |
| :----: | :------: | :------: | :------: | :--: |
| userNo |   工号   |  String  |   true   |      |
|        |          |          |          |      |
|        |          |          |          |      |

##### 	**返回参数**

|     参数     |   参数名称   | 参数类型  | 是否必传 |              备注              |
| :----------: | :----------: | :-------: | :------: | :----------------------------: |
|    count     |     总数     |    int    |   true   | 返回的数据总条数，分页情况使用 |
| **consList** | **用户列表** | **Array** | **true** |                                |
|              |              |           |          |            李EDFGri            |
