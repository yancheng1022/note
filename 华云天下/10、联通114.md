
验证码需要客户提供  
https://119.164.254.72:54491  
https://119.164.254.72:51234


# 2、慢sql查询

----------------------------------- sql 1 ---------------------------------------------------------------
-- 原始表执行计划
explain UPDATE `hycca_3.0`.LT114_contact_inquiries_info_202512 AS lt114 JOIN `hycca_3.0`.LT114_r_c_e AS voice ON lt114.field02 = voice.session_id SET lt114.start_time = voice.start_time, lt114.end_time = voice.end_time, lt114.call_duration = voice.duration WHERE voice.start_time >= DATE_SUB(NOW(), INTERVAL 10 MINUTE);

-- 修改field02类型，添加field02索引
ALTER TABLE `hycca_3.0`.a_lt114_contact_inquiries_info_202512 
MODIFY COLUMN `field02` bigint DEFAULT NULL COMMENT '预留字段02';
ALTER TABLE `a_lt114_contact_inquiries_info_202512` 
ADD INDEX idx_field02 (field02);

-- 修复后
explain UPDATE `hycca_3.0`.a_LT114_contact_inquiries_info_202512 AS lt114 JOIN `hycca_3.0`.a_LT114_r_c_e AS voice ON lt114.field02 = voice.session_id SET lt114.start_time = voice.start_time, lt114.end_time = voice.end_time, lt114.call_duration = voice.duration WHERE voice.start_time >= DATE_SUB(NOW(), INTERVAL 10 MINUTE);


----------------------------------- sql 2 ---------------------------------------------------------------

explain UPDATE `hycca_3.0`.LT114_contact_inquiries_info_202512 AS lt114 JOIN `hycca_3.0`.LT114_voice_call_result_data AS voice ON lt114.field02 = voice.session_id SET lt114.start_time = voice.start_time, lt114.end_time = voice.end_time, lt114.call_type = voice.call_type, lt114.caller_id = CASE WHEN voice.call_type = 1 THEN voice.local_url WHEN voice.call_type = 0 THEN voice.remote_url ELSE lt114.caller_id END, lt114.called_number = CASE WHEN voice.call_type = 1 THEN voice.remote_url WHEN voice.call_type = 0 THEN voice.local_url ELSE lt114.called_number END, lt114.call_duration = TIMESTAMPDIFF(SECOND, voice.start_time, voice.end_time), lt114.end_type_code = voice.end_type_code, lt114.end_type_name = voice.end_type_name, lt114.keypress_code = voice.keypress_code, lt114.keypress_name = voice.keypress_name, lt114.contact_mode = CASE WHEN voice.end_type_code = 1001 THEN '智能客服' ELSE '人工客服' END WHERE voice.start_time >= DATE_SUB(NOW(), INTERVAL 10 MINUTE);

