# 1、温度曲线

1. 增加监测时间format字段

```sql
ALTER TABLE ims_instrument_temperature_202308 ADD monitor_time_format datetime  COMMENT '监测时间'
```


2. 时间戳转时间

```sql
UPDATE ims_instrument_temperature_202308
SET monitor_time_format = FROM_UNIXTIME(monitor_time/1000,'%Y-%m-%d %H:%i:%s');
```


3. 修改分表逻辑后数据重新分配逻辑：InstrumentTemperatureHandlerTest
4. 结果比对
```sql
SELECT SUM(total) AS total_sum FROM (
  SELECT count(*) AS total FROM ims_instrument_temperature_202305
  UNION ALL
  SELECT count(*) AS total FROM ims_instrument_temperature_202306
  UNION ALL
  SELECT count(*) AS total FROM ims_instrument_temperature_202307
UNION ALL
  SELECT count(*) AS total FROM ims_instrument_temperature_202308
) AS totals;


SELECT SUM(total) AS total_sum FROM (
SELECT count(*) AS total FROM ims_instrument_temperature_copy_202301
  UNION ALL
  SELECT count(*) AS total FROM ims_instrument_temperature_copy_202302
  UNION ALL
  SELECT count(*) AS total FROM ims_instrument_temperature_copy_202303
  UNION ALL
  SELECT count(*) AS total FROM ims_instrument_temperature_copy_202304
  UNION ALL
  SELECT count(*) AS total FROM ims_instrument_temperature_copy_202305
  UNION ALL
  SELECT count(*) AS total FROM ims_instrument_temperature_copy_202306
  UNION ALL
  SELECT count(*) AS total FROM ims_instrument_temperature_copy_202307
UNION ALL
  SELECT count(*) AS total FROM ims_instrument_temperature_copy_202308
) AS totals;
```


4. 添加仪器温度位置字典


# 2、测试表分表逻辑调整


# 3、质控图
1. 客户名称查询改编码
2. 查询条件 区域，省份，仪器负责人，质控品编号需要补充