
```sql
ALTER TABLE gas_alarm ADD file_type VARCHAR(20);

select * from notice_alarm_record;

select * from notice_alarm_setting where notice_type = 1
```


访问地址：

http://172.30.1.152:11180/api/home/checklist/statistics/historyData?start=2024-06-01&end=2024-06-02&Access-Token=1_63780e55579344efa90eca8f7dc003ee_pc,1_4f2d5f589a6d4d98bd3932912c2c3c1e_pc,1_3aef7f4b1d0b445ab6147cbe316a7577_pc,1_85cd8685c52a4a67b7399abbb40374a1_pc



| 煤矿名称 | 煤矿编码      | 上报         | 完成情况 |
| ---- | --------- | ---------- | ---- |
| 后安   | 135000001 | 省煤监        | 1    |
| 担水沟  | 012020003 | 省煤监        | 1    |
| 东坡   | 012020001 | 省煤监        | 1    |
| 何家堡  | 067000002 | 省煤监、怀仁市应急局 | 1    |
| 吴家窑  | 066000002 | 省煤监、怀仁市应急局 | 1    |
| 焦煤矿  | 002030011 | 省煤监、怀仁市应急局 | 1    |
| 芦子沟  | 067000001 | 怀仁市应急局     | 2    |
| 峙峰山  | 066000001 | 怀仁市应急局     |      |
| 小峪   |           | 怀仁市应急局     | 2    |
| 王坪   | 610821301 | 怀仁市应急局     | 2    |
| 虎龙沟  | 002000018 | 怀仁市应急局     | 2    |
| 柴沟   | 028000001 | 怀仁市应急局     |      |
| 砂石矿  | 142000001 | 怀仁市应急局     |      |
|      |           |            |      |

```sql
-- 消息记录表
CREATE TABLE `notice_alarm_record` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `module_name` varchar(8) DEFAULT NULL COMMENT '模块名称（RY、AQ）',
  `scene_type` varchar(8) DEFAULT NULL COMMENT '场景类型',
  `scene_name` varchar(100) DEFAULT NULL COMMENT '场景名称',
  `send_time` datetime DEFAULT NULL COMMENT '发送时间',
  `phone` varchar(20) DEFAULT NULL COMMENT '手机号',
  `send_result` tinyint(1) DEFAULT NULL COMMENT '发送结果（0-失败，1-成功）',
  `content` varchar(255) DEFAULT NULL COMMENT '短信内容',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

-- 通知类型（1-核查单，0-其它）
ALTER TABLE notice_alarm_setting
ADD notice_type VARCHAR(8) default '0'
comment '通知类型（1-核查单，0-其它）' AFTER type;



INSERT INTO `notice_alarm_setting` (`module_name`, `type`, `notice_type`, `notice_url`, `notice_phones`, `notice_state`, `notice_end_state`, `notice_middle_state`, `scene_type`, `scene_name`, `notice_rate`, `notice_unit`, `notice_last_time`) VALUES ( 'AQ', '1', '1', 'https://yun.tim.qq.com/v5/tlssmssvr/sendsms', '', '1', '0', '0', '102', '报警文件中不存在实时数据', '10', '分钟', '1900-01-01 00:00:00');

INSERT INTO `notice_alarm_setting` (`module_name`, `type`, `notice_type`, `notice_url`, `notice_phones`, `notice_state`, `notice_end_state`, `notice_middle_state`, `scene_type`, `scene_name`, `notice_rate`, `notice_unit`, `notice_last_time`) VALUES ( 'AQ', '1', '1', 'https://yun.tim.qq.com/v5/tlssmssvr/sendsms', '', '1', '0', '0', '103', '报警文件未上传报警结束时间', '10', '分钟', '1900-01-01 00:00:00');

INSERT INTO `notice_alarm_setting` (`module_name`, `type`, `notice_type`, `notice_url`, `notice_phones`, `notice_state`, `notice_end_state`, `notice_middle_state`, `scene_type`, `scene_name`, `notice_rate`, `notice_unit`, `notice_last_time`) VALUES ( 'AQ', '1', '1', 'https://yun.tim.qq.com/v5/tlssmssvr/sendsms', '', '1', '0', '0', '104', '数据上传种类是否齐全', '10', '分钟', '1900-01-01 00:00:00');

INSERT INTO `notice_alarm_setting` (`module_name`, `type`, `notice_type`, `notice_url`, `notice_phones`, `notice_state`, `notice_end_state`, `notice_middle_state`, `scene_type`, `scene_name`, `notice_rate`, `notice_unit`, `notice_last_time`) VALUES ( 'AQ', '1', '1', 'https://yun.tim.qq.com/v5/tlssmssvr/sendsms', '', '1', '0', '0', '107', '信息不全:无传感器地点名称', '10', '分钟', '1900-01-01 00:00:00');

INSERT INTO `notice_alarm_setting` (`module_name`, `type`, `notice_type`, `notice_url`, `notice_phones`, `notice_state`, `notice_end_state`, `notice_middle_state`, `scene_type`, `scene_name`, `notice_rate`, `notice_unit`, `notice_last_time`) VALUES ( 'AQ', '1', '1', 'https://yun.tim.qq.com/v5/tlssmssvr/sendsms', '', '1', '0', '0', '108', '信息不全:无报警门限值', '10', '分钟', '1900-01-01 00:00:00');

INSERT INTO `notice_alarm_setting` (`module_name`, `type`, `notice_type`, `notice_url`, `notice_phones`, `notice_state`, `notice_end_state`, `notice_middle_state`, `scene_type`, `scene_name`, `notice_rate`, `notice_unit`, `notice_last_time`) VALUES ( 'AQ', '1', '1', 'https://yun.tim.qq.com/v5/tlssmssvr/sendsms', '', '1', '0', '0', '109', '信息不全:无传感器类型', '10', '分钟', '1900-01-01 00:00:00');

INSERT INTO `notice_alarm_setting` (`module_name`, `type`, `notice_type`, `notice_url`, `notice_phones`, `notice_state`, `notice_end_state`, `notice_middle_state`, `scene_type`, `scene_name`, `notice_rate`, `notice_unit`, `notice_last_time`) VALUES ( 'AQ', '1', '1', 'https://yun.tim.qq.com/v5/tlssmssvr/sendsms', '', '1', '0', '0', '113', '信息不全:传感器命名相同或为其他或为空，或为模糊性地点', '10', '分钟', '1900-01-01 00:00:00');

INSERT INTO `notice_alarm_setting` (`module_name`, `type`, `notice_type`, `notice_url`, `notice_phones`, `notice_state`, `notice_end_state`, `notice_middle_state`, `scene_type`, `scene_name`, `notice_rate`, `notice_unit`, `notice_last_time`) VALUES ( 'RY', '1', '1', 'https://yun.tim.qq.com/v5/tlssmssvr/sendsms', '', '1', '0', '0', '115', '数据上传种类不齐全', '10', '分钟', '1900-01-01 00:00:00');

INSERT INTO `notice_alarm_setting` (`module_name`, `type`, `notice_type`, `notice_url`, `notice_phones`, `notice_state`, `notice_end_state`, `notice_middle_state`, `scene_type`, `scene_name`, `notice_rate`, `notice_unit`, `notice_last_time`) VALUES ( 'RY', '1', '1', 'https://yun.tim.qq.com/v5/tlssmssvr/sendsms', '', '1', '0', '0', '117', '存在疑似睡岗', '10', '分钟', '1900-01-01 00:00:00');

```