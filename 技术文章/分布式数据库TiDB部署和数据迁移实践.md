

# 1、背景

某物联网项目，使用mysql存储数据，但随着接入设备的增加，数据量也呈指数级上升。单表数据超过5000万后，数据库性能急剧下降。这时我们的一般思路就是分库分表，使用mycat，sharding-jdbc等中间件，将大表拆成小表，提升性能。但分库分表的缺点也很明显，比如分表后的操作需要携带分片键，否则还是会扫描到所有的分表，这样导致某些业务场景无法使用到分表提升性能。如果分表跨实例，还会产生分布式事务问题，一旦某个数据库实例宕机，可能出现事务不一致的风险。基于以上的问题，通过调研，我们考虑使用NewSql来解决，而TiDB就是NewSql代表性产品，同时兼容 MySQL 协议和生态，是数据迁移成本最小的方案


|           | 厂商      | 诞生年份 | 优点                                                                            | 缺点                                              |
| --------- | ------- | ---- | ----------------------------------------------------------------------------- | ----------------------------------------------- |
| TDSQL     | 腾讯      | 2004 | 内置分片能力，实现数据的水平扩展                                                              | 只支持传统的 ACID事务                                   |
| OceanBase | 阿里      | 2010 | 高度可扩展性和容错性，支持大规模数据存储和处理，应对高并发工作负载                                             | 部署和管理复杂，学习成本高                                   |
| TiDB      | PingCAP | 2015 | 国内市场占有率高，生态相对完善，一键水平伸缩，强一致性的多副本数据安全，分布式事务，实时 OLAP 等重要特性。同时兼容 MySQL 协议和生态，迁移便捷 | 它对硬件要求较高。目前也分社区版和企业版                            |
| Spanner   | 谷歌      | 2017 | 支持水平扩展和在线分片，可靠的事务处理和高可用性                                                      | Google内部系统，开源和可用性受限，需要与Google Cloud平台集成，可能不方便使用 |


|            | 基本概念              |
| ---------- | ----------------- |
| RDBMS(Sql) | 关系型数据库，以行列的形式进行存储 |
| NoSql      |                   |
| NewSql     |                   |

